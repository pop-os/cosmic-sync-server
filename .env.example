# ================================================
# COSMIC Sync Server Environment Configuration
# ================================================
#
# Copy this file to .env and customize the values for your environment
# Example: cp .env.example .env

# ================================================
# Server Configuration
# ================================================

# Host address to bind the server to
# Use "0.0.0.0" to listen on all interfaces, "[::1]" for IPv6 localhost only
SERVER_HOST=0.0.0.0

# Port number for the server to listen on
SERVER_PORT=50051

# Number of worker threads for the async runtime
WORKER_THREADS=4

# ================================================
# Authentication Configuration
# ================================================

# Token expiration time in hours
AUTH_TOKEN_EXPIRY_HOURS=24

# ================================================
# Request Limits
# ================================================

# Maximum number of concurrent requests
MAX_CONCURRENT_REQUESTS=100

# Maximum file size in bytes (50MB default)
MAX_FILE_SIZE=52428800

# ================================================
# Database Configuration
# ================================================
# Individual database connection parameters for better security

# Database username
DB_USER=root

# Database password
DB_PASS=your_database_password

# Database name
DB_NAME=cosmic_sync

# Database host
DB_HOST=localhost

# Database port
DB_PORT=3306

# Maximum number of connections in the connection pool
DB_POOL=5

# ================================================
# Logging Configuration
# ================================================

# Rust log level and modules
# Options: error, warn, info, debug, trace
RUST_LOG=cosmic_sync_server=debug,info

# Application log level
LOG_LEVEL=info

# Enable file logging
LOG_TO_FILE=true

# Log file path
LOG_FILE=logs/cosmic-sync-server.log

# Maximum log file size in bytes before rotation (10MB default)
LOG_MAX_FILE_SIZE=10485760

# Maximum number of backup log files to keep
LOG_MAX_BACKUPS=5

# ================================================
# OAuth Configuration
# ================================================
# OAuth authentication settings for System76 or other OAuth providers

# OAuth client ID registered with the provider
OAUTH_CLIENT_ID=cosmic_sync_client

# OAuth client secret (keep this secure!)
OAUTH_CLIENT_SECRET=your_oauth_client_secret

# OAuth redirect URI - must match what's registered with the provider
# Update IP address to match your server's actual address
OAUTH_REDIRECT_URI=http://10.17.89.63:8080/oauth/callback

# OAuth authorization URL
OAUTH_AUTH_URL=http://10.17.89.63:4000/oauth/authorize

# OAuth token exchange URL
OAUTH_TOKEN_URL=http://10.17.89.63:4000/oauth/token

# OAuth user info URL
OAUTH_USER_INFO_URL=http://10.17.89.63:4000/api/settings

# OAuth scope
OAUTH_SCOPE=profile:read

# ================================================
# Feature Flags
# ================================================

# Enable test mode (allows test tokens for development)
COSMIC_SYNC_TEST_MODE=false

# Enable debug mode (may skip some authentication checks)
COSMIC_SYNC_DEBUG_MODE=false

# Enable detailed performance metrics collection
ENABLE_METRICS=false

# Enable encryption for stored files
STORAGE_ENCRYPTION=true

# Enable request validation for improved security
REQUEST_VALIDATION=true

# ================================================
# Storage Configuration
# ================================================

# Storage type: "database" or "s3"
STORAGE_TYPE=database

# ================================================
# S3 Configuration (when STORAGE_TYPE=s3)
# ================================================

# AWS region
AWS_REGION=us-east-1

# S3 bucket name for file storage
S3_BUCKET=cosmic-sync-files

# S3 object key prefix (folder structure)
S3_KEY_PREFIX=files/

# AWS credentials (optional if using IAM roles)
# AWS_ACCESS_KEY_ID=your_aws_access_key_id
# AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
# AWS_SESSION_TOKEN=your_aws_session_token

# S3 endpoint URL (for S3-compatible services like MinIO)
# S3_ENDPOINT_URL=http://localhost:9000

# Force path style addressing (required for some S3-compatible services)
S3_FORCE_PATH_STYLE=false

# Use AWS Secret Manager for credentials
USE_AWS_SECRET_MANAGER=false

# Secret Manager secret name (when USE_AWS_SECRET_MANAGER=true)
# AWS_SECRET_NAME=cosmic-sync/aws-credentials

# Connection timeout in seconds
S3_TIMEOUT_SECONDS=30

# Maximum number of retries for failed requests
S3_MAX_RETRIES=3
