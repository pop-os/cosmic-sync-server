warning: unused import: `aws_sdk_secretsmanager::Error as SecretsError`
 --> src/config/secrets.rs:5:5
  |
5 | use aws_sdk_secretsmanager::Error as SecretsError;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: unused import: `uuid::Uuid`
 --> src/models/device.rs:1:5
  |
1 | use uuid::Uuid;
  |     ^^^^^^^^^^

warning: unused imports: `datetime_to_timestamp` and `timestamp_to_datetime`
 --> src/models/device.rs:5:26
  |
5 | use crate::utils::time::{timestamp_to_datetime, datetime_to_timestamp};
  |                          ^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::utils::crypto::generate_device_hash`
 --> src/models/device.rs:6:5
  |
6 | use crate::utils::crypto::generate_device_hash;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `Deserializer` and `Serializer`
 --> src/models/file.rs:2:37
  |
2 | use serde::{Deserialize, Serialize, Deserializer, Serializer};
  |                                     ^^^^^^^^^^^^  ^^^^^^^^^^

warning: unused import: `std::str::FromStr`
 --> src/models/file.rs:6:5
  |
6 | use std::str::FromStr;
  |     ^^^^^^^^^^^^^^^^^

warning: unused imports: `SystemTime` and `UNIX_EPOCH`
 --> src/models/file.rs:7:17
  |
7 | use std::time::{SystemTime, UNIX_EPOCH};
  |                 ^^^^^^^^^^  ^^^^^^^^^^

warning: unused imports: `datetime_to_timestamp` and `timestamp_to_datetime`
 --> src/models/file.rs:8:26
  |
8 | use crate::utils::time::{timestamp_to_datetime, datetime_to_timestamp};
  |                          ^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `TimeZone`
 --> src/models/watcher.rs:1:24
  |
1 | use chrono::{DateTime, TimeZone, Utc};
  |                        ^^^^^^^^

warning: unused import: `uuid::Uuid`
 --> src/models/watcher.rs:3:5
  |
3 | use uuid::Uuid;
  |     ^^^^^^^^^^

warning: unused import: `serde_json`
 --> src/models/watcher.rs:6:5
  |
6 | use serde_json;
  |     ^^^^^^^^^^

warning: unused import: `std::collections::HashMap`
 --> src/models/watcher.rs:8:5
  |
8 | use std::collections::HashMap;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `watcher::*`
  --> src/models/mod.rs:23:9
   |
23 | pub use watcher::*;
   |         ^^^^^^^^^^

warning: unused import: `TxOpts`
 --> src/storage/mysql.rs:3:43
  |
3 | use mysql_async::{prelude::*, Opts, Pool, TxOpts};
  |                                           ^^^^^^

warning: unused import: `warn`
 --> src/storage/mysql.rs:4:35
  |
4 | use tracing::{debug, error, info, warn};
  |                                   ^^^^

warning: unused import: `std::sync::Arc`
 --> src/storage/mysql.rs:5:5
  |
5 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused import: `mysql_async::prelude::FromValue`
    --> src/storage/mysql.rs:1247:13
     |
1247 |         use mysql_async::prelude::FromValue;
     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `mysql_async::prelude::FromValue`
    --> src/storage/mysql.rs:1295:13
     |
1295 |         use mysql_async::prelude::FromValue;
     |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> src/storage/memory.rs:2:5
  |
2 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused import: `crate::models::file::FileInfo as ModelFileInfo`
 --> src/storage/memory.rs:7:5
  |
7 | use crate::models::file::FileInfo as ModelFileInfo;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `WatcherPreset`
 --> src/storage/memory.rs:8:44
  |
8 | use crate::models::watcher::{WatcherGroup, WatcherPreset};
  |                                            ^^^^^^^^^^^^^

warning: unused import: `DeviceInfo as ModelDeviceInfo`
  --> src/storage/memory.rs:10:37
   |
10 | use crate::models::device::{Device, DeviceInfo as ModelDeviceInfo};
   |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `FileNotice`
  --> src/storage/memory.rs:12:37
   |
12 | use crate::models::file::{FileInfo, FileNotice};
   |                                     ^^^^^^^^^^

warning: unused import: `crate::models::FileEntry`
  --> src/storage/memory.rs:13:5
   |
13 | use crate::models::FileEntry;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `DeviceInfo` and `WatcherData`
  --> src/storage/memory.rs:16:19
   |
16 | use crate::sync::{DeviceInfo, WatcherData, WatcherGroupData};
   |                   ^^^^^^^^^^  ^^^^^^^^^^^

warning: unused imports: `TimeZone` and `Utc`
  --> src/storage/memory.rs:17:14
   |
17 | use chrono::{Utc, TimeZone};
   |              ^^^  ^^^^^^^^

warning: unused import: `prost_types::Timestamp`
  --> src/storage/memory.rs:18:5
   |
18 | use prost_types::Timestamp;
   |     ^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `FromRowError` and `Row`
 --> src/storage/mysql_models.rs:6:31
  |
6 | use mysql_async::{prelude::*, Row, FromRowError};
  |                               ^^^  ^^^^^^^^^^^^

warning: unused import: `tracing::error`
 --> src/storage/mysql_models.rs:8:5
  |
8 | use tracing::error;
  |     ^^^^^^^^^^^^^^

warning: unused import: `debug`
 --> src/storage/mysql_account.rs:3:15
  |
3 | use tracing::{debug, error, info};
  |               ^^^^^

warning: unused import: `info`
 --> src/storage/mysql_auth.rs:3:29
  |
3 | use tracing::{debug, error, info};
  |                             ^^^^

warning: unused import: `std::convert::TryFrom`
 --> src/storage/mysql_device.rs:5:5
  |
5 | use std::convert::TryFrom;
  |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::storage::mysql_models::DeviceData`
  --> src/storage/mysql_device.rs:10:5
   |
10 | use crate::storage::mysql_models::DeviceData;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> src/storage/mysql_file.rs:5:5
  |
5 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused imports: `Executor` and `mysql::MySqlPool`
 --> src/storage/mysql_file.rs:6:12
  |
6 | use sqlx::{mysql::MySqlPool, Executor};
  |            ^^^^^^^^^^^^^^^^  ^^^^^^^^

warning: unused imports: `ErrorKind` and `Error`
 --> src/storage/mysql_file.rs:7:15
  |
7 | use std::io::{Error, ErrorKind};
  |               ^^^^^  ^^^^^^^^^

warning: unused import: `tokio::task`
 --> src/storage/mysql_file.rs:8:5
  |
8 | use tokio::task;
  |     ^^^^^^^^^^^

warning: unused import: `prost_types::Timestamp`
  --> src/storage/mysql_file.rs:10:5
   |
10 | use prost_types::Timestamp;
   |     ^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `WatcherPreset`
 --> src/storage/mysql_watcher.rs:6:44
  |
6 | use crate::models::watcher::{WatcherGroup, WatcherPreset, WatcherCondition, ConditionType};
  |                                            ^^^^^^^^^^^^^

warning: unused import: `DeviceInfo`
 --> src/storage/mysql_watcher.rs:7:19
  |
7 | use crate::sync::{DeviceInfo, WatcherData, WatcherGroupData};
  |                   ^^^^^^^^^^

warning: unused import: `std::path::PathBuf`
 --> src/storage/file_storage.rs:3:5
  |
3 | use std::path::PathBuf;
  |     ^^^^^^^^^^^^^^^^^^

warning: unused import: `tokio::fs`
 --> src/storage/file_storage.rs:5:5
  |
5 | use tokio::fs;
  |     ^^^^^^^^^

warning: unused imports: `AsyncReadExt` and `AsyncWriteExt`
 --> src/storage/file_storage.rs:6:17
  |
6 | use tokio::io::{AsyncReadExt, AsyncWriteExt};
  |                 ^^^^^^^^^^^^  ^^^^^^^^^^^^^

warning: unused import: `meta::region::RegionProviderChain`
 --> src/storage/file_storage.rs:9:18
  |
9 | use aws_config::{meta::region::RegionProviderChain, BehaviorVersion};
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::sync::Arc`
 --> src/storage/pool.rs:3:5
  |
3 | use std::sync::Arc;
  |     ^^^^^^^^^^^^^^

warning: unused imports: `debug` and `warn`
  --> src/storage/mod.rs:24:15
   |
24 | use tracing::{debug, info, warn, error, instrument};
   |               ^^^^^        ^^^^

warning: unused imports: `DeviceInfo`, `FileEntry`, and `WatcherPreset`
  --> src/storage/mod.rs:30:23
   |
30 |         WatcherGroup, WatcherPreset, WatcherCondition,
   |                       ^^^^^^^^^^^^^
31 |         FileEntry, file::FileNotice
   |         ^^^^^^^^^
32 |     },
33 |     sync::{DeviceInfo, WatcherData, WatcherGroupData},
   |            ^^^^^^^^^^

warning: unused import: `std::net::SocketAddr`
 --> src/server/http.rs:2:5
  |
2 | use std::net::SocketAddr;
  |     ^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `App`, `HttpServer`, `post`, and `rt`
 --> src/server/http.rs:5:10
  |
5 |     web, App, HttpServer, 
  |          ^^^  ^^^^^^^^^^
6 |     HttpResponse, Responder,
7 |     get, post, rt
  |          ^^^^  ^^

warning: unused import: `AuthSession`
  --> src/server/http.rs:12:42
   |
12 | use crate::server::app_state::{AppState, AuthSession};
   |                                          ^^^^^^^^^^^

warning: unused import: `warn`
 --> src/server/app_state.rs:3:21
  |
3 | use tracing::{info, warn, error, debug};
  |                     ^^^^

warning: unused import: `VersionService`
  --> src/server/app_state.rs:13:40
   |
13 | use crate::services::version_service::{VersionService, VersionServiceImpl};
   |                                        ^^^^^^^^^^^^^^

warning: unused import: `Duration`
  --> src/server/app_state.rs:17:19
   |
17 | use chrono::{Utc, Duration, DateTime};
   |                   ^^^^^^^^

warning: unused import: `std::path::PathBuf`
  --> src/server/app_state.rs:19:5
   |
19 | use std::path::PathBuf;
   |     ^^^^^^^^^^^^^^^^^^

warning: unused import: `std::fs`
  --> src/server/app_state.rs:20:5
   |
20 | use std::fs;
   |     ^^^^^^^

warning: unused import: `std::fs::File`
  --> src/server/app_state.rs:21:5
   |
21 | use std::fs::File;
   |     ^^^^^^^^^^^^^

warning: unused import: `std::io::Write`
  --> src/server/app_state.rs:22:5
   |
22 | use std::io::Write;
   |     ^^^^^^^^^^^^^^

warning: unused import: `watcher_group_update_notification::UpdateType`
   --> src/server/app_state.rs:355:59
    |
355 |         use crate::sync::{WatcherGroupUpdateNotification, watcher_group_update_notification::UpdateType};
    |                                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `watcher_preset_update_notification::UpdateType`
   --> src/server/app_state.rs:389:60
    |
389 |         use crate::sync::{WatcherPresetUpdateNotification, watcher_preset_update_notification::UpdateType};
    |                                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `warn`
 --> src/server/connection_tracker.rs:8:28
  |
8 | use tracing::{debug, info, warn};
  |                            ^^^^

warning: unused import: `error`
 --> src/server/connection_cleanup.rs:5:21
  |
5 | use tracing::{info, error, debug};
  |                     ^^^^^

warning: unused import: `warn`
 --> src/server/common/lifecycle.rs:6:21
  |
6 | use tracing::{info, warn, error, debug};
  |                     ^^^^

warning: unused import: `DateTime`
 --> src/server/common/health.rs:5:14
  |
5 | use chrono::{DateTime, Utc};
  |              ^^^^^^^^

warning: unused import: `tokio::sync::RwLock`
 --> src/server/components/sync_server.rs:6:5
  |
6 | use tokio::sync::RwLock;
  |     ^^^^^^^^^^^^^^^^^^^

warning: unused import: `debug`
 --> src/server/components/sync_server.rs:7:28
  |
7 | use tracing::{info, error, debug};
  |                            ^^^^^

warning: unused import: `info`
 --> src/services/auth_service.rs:2:15
  |
2 | use tracing::{info, error, debug};
  |               ^^^^

warning: unused imports: `AuthNotificationResponse`, `AuthSuccessNotification`, `LoginResponse`, `OAuthExchangeResponse`, and `VerifyLoginResponse`
 --> src/services/auth_service.rs:6:19
  |
6 | use crate::sync::{LoginResponse, VerifyLoginResponse, OAuthExchangeResponse, AuthSuccessNotification, AuthNotificationResponse};
  |                   ^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::models::device::DeviceInfo as ModelDeviceInfo`
 --> src/services/device_service.rs:6:5
  |
6 | use crate::models::device::DeviceInfo as ModelDeviceInfo;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `file_update_notification`
 --> src/services/file_service.rs:6:43
  |
6 | use crate::sync::{FileUpdateNotification, file_update_notification};
  |                                           ^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `prost_types`
 --> src/services/file_service.rs:9:5
  |
9 | use prost_types;
  |     ^^^^^^^^^^^

warning: unused imports: `Watcher as ModelWatcher` and `WatcherGroupData`
 --> src/services/watcher_service.rs:5:44
  |
5 | use crate::models::watcher::{WatcherGroup, WatcherGroupData, Watcher as ModelWatcher};
  |                                            ^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `DateTime`
 --> src/services/version_service.rs:5:14
  |
5 | use chrono::{DateTime, Utc};
  |              ^^^^^^^^

warning: unused import: `error`
 --> src/services/version_service.rs:6:34
  |
6 | use tracing::{debug, info, warn, error};
  |                                  ^^^^^

warning: unused import: `VersionUpdateNotification`
  --> src/services/version_service.rs:17:36
   |
17 |         FileVersionInfo, FileInfo, VersionUpdateNotification,
   |                                    ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `Mutex`
  --> src/handlers/auth_handler.rs:17:22
   |
17 | use std::sync::{Arc, Mutex};
   |                      ^^^^^

warning: unused import: `std::collections::HashMap`
  --> src/handlers/auth_handler.rs:20:5
   |
20 | use std::collections::HashMap;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `Duration`
  --> src/handlers/auth_handler.rs:21:19
   |
21 | use chrono::{Utc, Duration};
   |                   ^^^^^^^^

warning: unused import: `HttpRequest`
   --> src/handlers/auth_handler.rs:646:22
    |
646 | use actix_web::{web, HttpRequest, HttpResponse, Result as ActixResult};
    |                      ^^^^^^^^^^^

warning: unused import: `serde_json::json`
   --> src/handlers/auth_handler.rs:647:5
    |
647 | use serde_json::json;
    |     ^^^^^^^^^^^^^^^^

warning: unused imports: `LoginRequest` and `LoginResponse`
 --> src/handlers/device_handler.rs:3:5
  |
3 |     LoginRequest, LoginResponse,
  |     ^^^^^^^^^^^^  ^^^^^^^^^^^^^

warning: unused import: `uuid::Uuid`
  --> src/handlers/device_handler.rs:20:5
   |
20 | use uuid::Uuid;
   |     ^^^^^^^^^^

warning: unused imports: `FileInfo` and `SubscribeRequest`
  --> src/handlers/file_handler.rs:8:5
   |
8  |     FileInfo,
   |     ^^^^^^^^
...
14 |     SubscribeRequest,
   |     ^^^^^^^^^^^^^^^^

warning: unused import: `std::panic`
  --> src/handlers/file_handler.rs:18:5
   |
18 | use std::panic;
   |     ^^^^^^^^^^

warning: unused import: `chrono::Utc`
  --> src/handlers/file_handler.rs:24:5
   |
24 | use chrono::Utc;
   |     ^^^^^^^^^^^

warning: unused import: `rand`
  --> src/handlers/file_handler.rs:26:5
   |
26 | use rand;
   |     ^^^^

warning: unused import: `WatcherGroupData`
  --> src/handlers/watcher_handler.rs:10:5
   |
10 |     WatcherGroupData,
   |     ^^^^^^^^^^^^^^^^

warning: unused import: `web`
 --> src/handlers/health.rs:2:17
  |
2 | use actix_web::{web, HttpResponse, Result as ActixResult};
  |                 ^^^

warning: unused import: `web`
 --> src/handlers/api.rs:3:17
  |
3 | use actix_web::{web, HttpResponse, Result};
  |                 ^^^

warning: unused import: `web`
 --> src/handlers/metrics.rs:3:17
  |
3 | use actix_web::{web, HttpResponse, Result};
  |                 ^^^

warning: unused import: `get`
  --> src/handlers/oauth.rs:59:72
   |
59 | use actix_web::{web, HttpRequest, HttpResponse, Result as ActixResult, get};
   |                                                                        ^^^

warning: unused import: `serde_json::json`
  --> src/handlers/oauth.rs:61:5
   |
61 | use serde_json::json;
   |     ^^^^^^^^^^^^^^^^

warning: unused import: `AuthSession`
  --> src/handlers/oauth.rs:63:42
   |
63 | use crate::server::app_state::{AppState, AuthSession};
   |                                          ^^^^^^^^^^^

warning: unused import: `crate::models::Account`
 --> src/auth/mod.rs:1:5
  |
1 | use crate::models::Account;
  |     ^^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `debug` and `warn`
 --> src/auth/mod.rs:3:22
  |
3 | use tracing::{error, warn, debug};
  |                      ^^^^  ^^^^^

warning: unused import: `Sha256`
 --> src/auth/oauth.rs:7:12
  |
7 | use sha2::{Sha256, Digest};
  |            ^^^^^^

warning: unused imports: `SystemTime` and `UNIX_EPOCH`
  --> src/auth/oauth.rs:12:17
   |
12 | use std::time::{SystemTime, UNIX_EPOCH};
   |                 ^^^^^^^^^^  ^^^^^^^^^^

warning: unused import: `rand::Rng`
  --> src/auth/oauth.rs:14:5
   |
14 | use rand::Rng;
   |     ^^^^^^^^^

warning: unused imports: `extract_account_hash` and `generate_session_token`
  --> src/auth/oauth.rs:16:69
   |
16 | use crate::auth::token::{generate_auth_token, generate_state_token, generate_session_token, extract_account_hash};
   |                                                                     ^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::models::device::Device`
  --> src/auth/oauth.rs:17:5
   |
17 | use crate::models::device::Device;
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `random`
 --> src/auth/token.rs:2:12
  |
2 | use rand::{random, RngCore, rngs::OsRng};
  |            ^^^^^^

warning: unused import: `uuid::Uuid`
 --> src/utils/crypto.rs:1:5
  |
1 | use uuid::Uuid;
  |     ^^^^^^^^^^

warning: unused import: `NaiveDateTime`
 --> src/utils/time.rs:1:29
  |
1 | use chrono::{DateTime, Utc, NaiveDateTime, TimeZone, Timelike};
  |                             ^^^^^^^^^^^^^

warning: unused import: `Serialize`
 --> src/utils/time.rs:3:26
  |
3 | use serde::{Deserialize, Serialize, Deserializer, Serializer};
  |                          ^^^^^^^^^

warning: unused import: `ser`
  --> src/utils/time.rs:27:21
   |
27 |     use serde::{de, ser};
   |                     ^^^

warning: unused imports: `RegisterWatcherGroupResponse`, `UpdateDeviceInfoResponse`, and `UpdateWatcherGroupResponse`
 --> src/utils/response.rs:3:29
  |
3 |     RegisterDeviceResponse, UpdateDeviceInfoResponse,
  |                             ^^^^^^^^^^^^^^^^^^^^^^^^
4 |     RegisterWatcherGroupResponse, UpdateWatcherGroupResponse,
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::fmt`
 --> src/error.rs:1:5
  |
1 | use std::fmt;
  |     ^^^^^^^^

warning: unused import: `tokio::sync::RwLock`
 --> src/monitoring.rs:6:5
  |
6 | use tokio::sync::RwLock;
  |     ^^^^^^^^^^^^^^^^^^^

warning: unused import: `std::collections::HashMap`
 --> src/validation.rs:3:5
  |
3 | use std::collections::HashMap;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `container::AppContainer`
 --> src/container/registry.rs:8:5
  |
8 |     container::AppContainer,
  |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::Result`
   --> src/lib.rs:193:9
    |
193 |     use crate::Result;
    |         ^^^^^^^^^^^^^

warning: unused variable: `scope`
  --> src/storage/mysql_auth.rs:37:13
   |
37 |         let scope = auth_token.scope.as_deref().unwrap_or("");
   |             ^^^^^ help: if this is intentional, prefix it with an underscore: `_scope`
   |
   = note: `#[warn(unused_variables)]` on by default

warning: unused variable: `existing_file_id`
   --> src/storage/mysql_file.rs:121:22
    |
121 |         if let Some((existing_file_id, current_revision)) = existing_by_file_id {
    |                      ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_existing_file_id`

warning: unused variable: `current_revision`
   --> src/storage/mysql_file.rs:121:40
    |
121 |         if let Some((existing_file_id, current_revision)) = existing_by_file_id {
    |                                        ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_current_revision`

warning: unused variable: `created_time_str`
   --> src/storage/mysql_file.rs:291:17
    |
291 |             let created_time_str: String = row.get(6).unwrap_or_else(|| String::from("1970-01-01 00:00:00"));
    |                 ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_time_str`

warning: unused variable: `created_time_str`
   --> src/storage/mysql_file.rs:362:17
    |
362 |             let created_time_str: String = row.get(6).unwrap_or_else(|| String::from("1970-01-01 00:00:00"));
    |                 ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_time_str`

warning: unused variable: `created_time_str`
   --> src/storage/mysql_file.rs:446:17
    |
446 |             let created_time_str: String = row.get(6).unwrap_or_else(|| String::from("1970-01-01 00:00:00"));
    |                 ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_time_str`

warning: unused variable: `created_time_str`
   --> src/storage/mysql_file.rs:517:17
    |
517 |             let created_time_str: String = row.get(6).unwrap_or_else(|| String::from("1970-01-01 00:00:00"));
    |                 ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_time_str`

warning: unused variable: `created_time_str`
   --> src/storage/mysql_file.rs:669:17
    |
669 |             let created_time_str: String = row.get(6).unwrap_or_else(|| String::from("1970-01-01 00:00:00"));
    |                 ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_time_str`

warning: unused variable: `created_time_str`
   --> src/storage/mysql_file.rs:871:17
    |
871 |             let created_time_str: String = row.get(7).unwrap_or_else(|| String::from("1970-01-01 00:00:00"));
    |                 ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_time_str`

warning: unused variable: `created_time_str`
    --> src/storage/mysql_file.rs:1105:17
     |
1105 |             let created_time_str: String = row.get(7).unwrap_or_else(|| String::from("1970-01-01 00:00:00"));
     |                 ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_time_str`

warning: unused variable: `created_time_str`
    --> src/storage/mysql_file.rs:1230:17
     |
1230 |             let created_time_str: String = row.get(6).unwrap_or_else(|| String::from("1970-01-01 00:00:00"));
     |                 ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_created_time_str`

warning: unused variable: `group_id`
   --> src/storage/mysql_watcher.rs:244:13
    |
244 |         let group_id: i32 = tx.exec_first("SELECT LAST_INSERT_ID()", ())
    |             ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_group_id`

warning: unused variable: `actual_local_group_id`
    --> src/storage/mysql_watcher.rs:1218:13
     |
1218 |         let actual_local_group_id = if condition.local_group_id == 0 {
     |             ^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_actual_local_group_id`

warning: unused variable: `session_exists_before`
   --> src/server/http.rs:140:9
    |
140 |     let session_exists_before = {
    |         ^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_session_exists_before`

warning: unused variable: `auth_handler`
   --> src/server/http.rs:318:5
    |
318 |     auth_handler: web::Data<AuthHandler>,
    |     ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_auth_handler`

warning: unused variable: `performance_monitor`
  --> src/server/startup.rs:33:9
   |
33 |     let performance_monitor = Arc::new(PerformanceMonitor::new());
   |         ^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_performance_monitor`

warning: unused variable: `storage`
  --> src/server/startup.rs:36:9
   |
36 |     let storage = init_storage_from_config(&config).await?;
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_storage`

warning: unused variable: `storage`
  --> src/server/startup.rs:79:5
   |
79 |     storage: Arc<dyn Storage>,
   |     ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_storage`

warning: use of deprecated method `actix_web::HttpServer::<F, I, S, B>::client_timeout`: Renamed to `client_request_timeout`.
   --> src/server/startup.rs:245:6
    |
245 |     .client_timeout(Duration::from_secs(120))
    |      ^^^^^^^^^^^^^^
    |
    = note: `#[warn(deprecated)]` on by default

warning: unused variable: `storage`
   --> src/server/app_state.rs:203:51
    |
203 |     async fn initialize_file_storage_with_storage(storage: Arc<dyn Storage>) -> Result<Arc<dyn FileStorage>, AppError> {
    |                                                   ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_storage`

warning: unused variable: `health_clone`
   --> src/server/common/lifecycle.rs:150:13
    |
150 |         let health_clone = self.health_monitor.clone();
    |             ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_health_clone`

warning: unused variable: `watcher_ids`
  --> src/services/watcher_service.rs:55:9
   |
55 |         watcher_ids: Vec<i32>,
   |         ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_watcher_ids`

warning: unused variable: `watcher_data`
   --> src/services/watcher_service.rs:183:9
    |
183 |         watcher_data: sync::WatcherData,
    |         ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_watcher_data`

warning: unused variable: `watcher_data`
   --> src/services/watcher_service.rs:211:9
    |
211 |         watcher_data: sync::WatcherData,
    |         ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_watcher_data`

warning: unused variable: `request`
   --> src/handlers/auth_handler.rs:309:31
    |
309 |     pub async fn login(&self, request: Request<LoginRequest>) -> Result<Response<LoginResponse>, Status> {
    |                               ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `auth_handler`
   --> src/handlers/auth_handler.rs:719:5
    |
719 |     auth_handler: web::Data<AuthHandler>,
    |     ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_auth_handler`

warning: use of deprecated associated function `chrono::DateTime::<Tz>::from_utc`: Use TimeZone::from_utc_datetime() or DateTime::from_naive_utc_and_offset instead
   --> src/handlers/file_handler.rs:423:46
    |
423 |             chrono::DateTime::<chrono::Utc>::from_utc(
    |                                              ^^^^^^^^

warning: use of deprecated associated function `chrono::NaiveDateTime::from_timestamp_opt`: use `DateTime::from_timestamp` instead
   --> src/handlers/file_handler.rs:424:40
    |
424 |                 chrono::NaiveDateTime::from_timestamp_opt(ts.seconds, ts.nanos as u32)
    |                                        ^^^^^^^^^^^^^^^^^^

warning: use of deprecated associated function `chrono::DateTime::<Tz>::from_utc`: Use TimeZone::from_utc_datetime() or DateTime::from_naive_utc_and_offset instead
   --> src/handlers/file_handler.rs:448:82
    |
448 |                         let file_updated_time = chrono::DateTime::<chrono::Utc>::from_utc(
    |                                                                                  ^^^^^^^^

warning: use of deprecated associated function `chrono::NaiveDateTime::from_timestamp_opt`: use `DateTime::from_timestamp` instead
   --> src/handlers/file_handler.rs:449:52
    |
449 | ...                   chrono::NaiveDateTime::from_timestamp_opt(file.updated_time.seconds, 0)
    |                                              ^^^^^^^^^^^^^^^^^^

warning: unused variable: `auth_token`
  --> src/handlers/watcher_handler.rs:46:13
   |
46 |         let auth_token = req.auth_token;
   |             ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_auth_token`

warning: unused variable: `auth_token`
  --> src/handlers/watcher_handler.rs:83:13
   |
83 |         let auth_token = req.auth_token;
   |             ^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_auth_token`

warning: unused variable: `client_timestamp`
   --> src/handlers/watcher_handler.rs:483:13
    |
483 |         let client_timestamp = req.client_timestamp;
    |             ^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_client_timestamp`

warning: unused variable: `session_exists_before`
   --> src/handlers/oauth.rs:219:9
    |
219 |     let session_exists_before = {
    |         ^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_session_exists_before`

warning: unused variable: `account_obj`
   --> src/auth/oauth.rs:425:9
    |
425 |     let account_obj = match oauth_service.storage.get_account_by_hash(&account_hash).await {
    |         ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_obj`

warning: unused variable: `config`
  --> src/container/builder.rs:78:64
   |
78 |     async fn build_services(&self, storage: &Arc<dyn Storage>, config: &Arc<Config>) -> Result<Services> {
   |                                                                ^^^^^^ help: if this is intentional, prefix it with an underscore: `_config`

warning: unused variable: `typed_service`
  --> src/container/registry.rs:55:29
   |
55 |                 if let Some(typed_service) = service.downcast_ref::<T>() {
   |                             ^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_typed_service`

warning: use of deprecated associated function `chrono::NaiveDateTime::from_timestamp_opt`: use `DateTime::from_timestamp` instead
  --> src/storage/mysql_models.rs:14:40
   |
14 |     let naive = chrono::NaiveDateTime::from_timestamp_opt(seconds, 0).unwrap_or_default();
   |                                        ^^^^^^^^^^^^^^^^^^

warning: unused import: `prelude`
 --> src/storage/mysql_models.rs:6:19
  |
6 | use mysql_async::{prelude::*, Row, FromRowError};
  |                   ^^^^^^^

warning: unused import: `chrono::prelude`
 --> src/storage/mysql_account.rs:1:5
  |
1 | use chrono::prelude::*;
  |     ^^^^^^^^^^^^^^^

warning: unused import: `crate::storage::mysql_watcher::MySqlWatcherExt`
 --> src/server/app_state.rs:6:5
  |
6 | use crate::storage::mysql_watcher::MySqlWatcherExt;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `crate::storage::Storage`
  --> src/handlers/sync_handler.rs:18:5
   |
18 | use crate::storage::Storage;
   |     ^^^^^^^^^^^^^^^^^^^^^^^

warning: unused import: `Digest`
 --> src/auth/oauth.rs:7:20
  |
7 | use sha2::{Sha256, Digest};
  |                    ^^^^^^

warning: unused variable: `server_group_id`
   --> src/storage/mysql.rs:810:63
    |
810 |     async fn get_client_watcher_id(&self, account_hash: &str, server_group_id: i32, server_watcher_id: i32) -> Result<Option<(i32, i32)>> {
    |                                                               ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_server_group_id`

warning: unused variable: `account_hash`
   --> src/storage/mysql.rs:859:48
    |
859 |     async fn register_watcher_condition(&self, account_hash: &str, condition: &WatcherCondition) -> Result<i64> {
    |                                                ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `account_hash`
   --> src/storage/memory.rs:373:44
    |
373 |     async fn register_watcher_group(&self, account_hash: &str, device_hash: &str, watcher_group: &WatcherGroup) -> crate::storage::Result<i32> {
    |                                            ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `device_hash`
   --> src/storage/memory.rs:373:64
    |
373 |     async fn register_watcher_group(&self, account_hash: &str, device_hash: &str, watcher_group: &WatcherGroup) -> crate::storage::Result<i32> {
    |                                                                ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_device_hash`

warning: unused variable: `device_hash`
   --> src/storage/memory.rs:485:71
    |
485 |     async fn register_watcher_preset_proto(&self, account_hash: &str, device_hash: &str, presets: Vec<String>) -> crate::storage::Result<()> {
    |                                                                       ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_device_hash`

warning: unused variable: `device_hash`
   --> src/storage/memory.rs:492:69
    |
492 |     async fn update_watcher_preset_proto(&self, account_hash: &str, device_hash: &str, presets: Vec<String>) -> crate::storage::Result<()> {
    |                                                                     ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_device_hash`

warning: unused variable: `file`
   --> src/storage/memory.rs:792:21
    |
792 |         if let Some(file) = data.files.get(&file_id) {
    |                     ^^^^ help: if this is intentional, prefix it with an underscore: `_file`

warning: unused variable: `account_hash`
   --> src/storage/memory.rs:906:43
    |
906 |     async fn get_client_watcher_id(&self, account_hash: &str, server_group_id: i32, server_watcher_id: i32) -> crate::storage::Result<Option<(i32, i32)>> {
    |                                           ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `account_hash`
   --> src/storage/memory.rs:927:48
    |
927 |     async fn register_watcher_condition(&self, account_hash: &str, condition: &crate::models::watcher::WatcherCondition) -> crate::storage::Result<i64> {
    |                                                ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `file_notice`
   --> src/storage/memory.rs:966:39
    |
966 |     async fn store_file_notice(&self, file_notice: &crate::models::file::FileNotice) -> crate::storage::Result<()> {
    |                                       ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_file_notice`

warning: unused variable: `account_hash`
   --> src/storage/memory.rs:971:38
    |
971 |     async fn get_file_notices(&self, account_hash: &str, device_hash: &str) -> crate::storage::Result<Vec<crate::models::file::FileNotice>> {
    |                                      ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `device_hash`
   --> src/storage/memory.rs:971:58
    |
971 |     async fn get_file_notices(&self, account_hash: &str, device_hash: &str) -> crate::storage::Result<Vec<crate::models::file::FileNotice>> {
    |                                                          ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_device_hash`

warning: unused variable: `account_hash`
   --> src/storage/memory.rs:976:40
    |
976 |     async fn delete_file_notice(&self, account_hash: &str, device_hash: &str, file_id: u64) -> crate::storage::Result<()> {
    |                                        ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `device_hash`
   --> src/storage/memory.rs:976:60
    |
976 |     async fn delete_file_notice(&self, account_hash: &str, device_hash: &str, file_id: u64) -> crate::storage::Result<()> {
    |                                                            ^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_device_hash`

warning: unused variable: `file_id`
   --> src/storage/memory.rs:976:79
    |
976 |     async fn delete_file_notice(&self, account_hash: &str, device_hash: &str, file_id: u64) -> crate::storage::Result<()> {
    |                                                                               ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_file_id`

warning: unused variable: `account_hash`
   --> src/storage/memory.rs:982:38
    |
982 |     async fn get_file_history(&self, account_hash: &str, file_path: &str, group_id: i32) -> crate::storage::Result<Vec<crate::models::file::SyncFile>> {
    |                                      ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `account_hash`
   --> src/storage/memory.rs:989:45
    |
989 |     async fn get_file_versions_by_id(&self, account_hash: &str, file_id: u64) -> crate::storage::Result<Vec<crate::models::file::SyncFile>> {
    |                                             ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `account_hash`
   --> src/storage/memory.rs:995:42
    |
995 |     async fn get_file_by_revision(&self, account_hash: &str, file_id: u64, revision: i64) -> crate::storage::Result<crate::models::file::SyncFile> {
    |                                          ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `compress`
   --> src/storage/file_storage.rs:157:79
    |
157 |     async fn store_file_data_with_options(&self, file_id: u64, data: Vec<u8>, compress: bool) -> Result<String> {
    |                                                                               ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_compress`

warning: unused variable: `compress`
   --> src/storage/file_storage.rs:582:79
    |
582 |     async fn store_file_data_with_options(&self, file_id: u64, data: Vec<u8>, compress: bool) -> Result<String> {
    |                                                                               ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_compress`

warning: unused variable: `request`
   --> src/server/service.rs:501:9
    |
501 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `tx`
   --> src/server/service.rs:505:14
    |
505 |         let (tx, rx) = mpsc::channel(128);
    |              ^^ help: if this is intentional, prefix it with an underscore: `_tx`

warning: unused variable: `request`
   --> src/server/service.rs:518:9
    |
518 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `tx`
   --> src/server/service.rs:522:14
    |
522 |         let (tx, rx) = mpsc::channel(128);
    |              ^^ help: if this is intentional, prefix it with an underscore: `_tx`

warning: unused variable: `request`
   --> src/server/service.rs:535:9
    |
535 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `tx`
   --> src/server/service.rs:539:14
    |
539 |         let (tx, rx) = mpsc::channel(128);
    |              ^^ help: if this is intentional, prefix it with an underscore: `_tx`

warning: unused variable: `request`
   --> src/server/service.rs:899:9
    |
899 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `tx`
   --> src/server/service.rs:903:14
    |
903 |         let (tx, rx) = mpsc::channel(128);
    |              ^^ help: if this is intentional, prefix it with an underscore: `_tx`

warning: unused variable: `request`
   --> src/server/service.rs:938:9
    |
938 |         request: Request<AuthSuccessNotification>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `account_hash`
  --> src/services/auth_service.rs:48:34
   |
48 |     pub fn generate_token(&self, account_hash: &str) -> String {
   |                                  ^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_account_hash`

warning: unused variable: `change_description`
   --> src/services/version_service.rs:328:58
    |
328 |     async fn create_file_version(&self, file: &SyncFile, change_description: Option<String>) -> Result<i64> {
    |                                                          ^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_change_description`

warning: unused variable: `request`
  --> src/services/mod.rs:57:9
   |
57 |         request: Request<OAuthExchangeRequest>,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
  --> src/services/mod.rs:65:9
   |
65 |         request: Request<RegisterDeviceRequest>,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
  --> src/services/mod.rs:72:9
   |
72 |         request: Request<ListDevicesRequest>,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
  --> src/services/mod.rs:79:9
   |
79 |         request: Request<DeleteDeviceRequest>,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
  --> src/services/mod.rs:86:9
   |
86 |         request: Request<UpdateDeviceInfoRequest>,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
  --> src/services/mod.rs:94:9
   |
94 |         request: Request<RequestEncryptionKeyRequest>,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:102:9
    |
102 |         request: Request<UploadFileRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:109:9
    |
109 |         request: Request<DownloadFileRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:116:9
    |
116 |         request: Request<ListFilesRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:123:9
    |
123 |         request: Request<DeleteFileRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:131:9
    |
131 |         request: Request<FindFileRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:139:9
    |
139 |         request: Request<CheckFileExistsRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:147:9
    |
147 |         request: Request<RegisterWatcherPresetRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:154:9
    |
154 |         request: Request<UpdateWatcherPresetRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:161:9
    |
161 |         request: Request<GetWatcherPresetRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:169:9
    |
169 |         request: Request<RegisterWatcherGroupRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:176:9
    |
176 |         request: Request<UpdateWatcherGroupRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:183:9
    |
183 |         request: Request<DeleteWatcherGroupRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:190:9
    |
190 |         request: Request<GetWatcherGroupRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:197:9
    |
197 |         request: Request<GetWatcherGroupsRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:205:9
    |
205 |         request: Request<HealthCheckRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:212:9
    |
212 |         request: Request<ValidateTokenRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:219:9
    |
219 |         request: Request<CheckAuthStatusRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:227:9
    |
227 |         request: Request<SyncConfigurationRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:235:9
    |
235 |         request: Request<GetAccountInfoRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:243:9
    |
243 |         request: Request<LoginRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:250:9
    |
250 |         request: Request<VerifyLoginRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:258:9
    |
258 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:265:9
    |
265 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:272:9
    |
272 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:279:9
    |
279 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:286:9
    |
286 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:293:9
    |
293 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:300:9
    |
300 |         request: Request<SubscribeRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:308:9
    |
308 |         request: Request<GetFileHistoryRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:315:9
    |
315 |         request: Request<RestoreFileVersionRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
   --> src/services/mod.rs:322:9
    |
322 |         request: Request<BroadcastFileRestoreRequest>,
    |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `request`
  --> src/handlers/health.rs:16:9
   |
16 |         request: Request<HealthCheckRequest>,
   |         ^^^^^^^ help: if this is intentional, prefix it with an underscore: `_request`

warning: unused variable: `duration`
   --> src/monitoring.rs:176:35
    |
176 |     pub fn record_db_query(&self, duration: Duration, is_slow: bool) {
    |                                   ^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_duration`

warning: constant `CONNECTION_POOL_MIN` is never used
  --> src/storage/mysql.rs:21:7
   |
21 | const CONNECTION_POOL_MIN: usize = 5;
   |       ^^^^^^^^^^^^^^^^^^^
   |
   = note: `#[warn(dead_code)]` on by default

warning: constant `CONNECTION_POOL_MAX` is never used
  --> src/storage/mysql.rs:22:7
   |
22 | const CONNECTION_POOL_MAX: usize = 50;
   |       ^^^^^^^^^^^^^^^^^^^

warning: associated function `sql_error` is never used
   --> src/storage/mysql.rs:518:8
    |
29  | impl MySqlStorage {
    | ----------------- associated function in this implementation
...
518 |     fn sql_error(e: mysql_async::Error) -> StorageError {
    |        ^^^^^^^^^

warning: multiple methods are never used
    --> src/storage/mysql.rs:1331:14
     |
1244 | impl MySqlStorage {
     | ----------------- methods in this implementation
...
1331 |     async fn health_check(&self) -> Result<bool> {
     |              ^^^^^^^^^^^^
...
1335 |     async fn get_metrics(&self) -> Result<StorageMetrics> {
     |              ^^^^^^^^^^^
...
1348 |     async fn close(&self) -> Result<()> {
     |              ^^^^^
...
1352 |     async fn batch_create_accounts(&self, _accounts: &[Account]) -> Result<Vec<bool>> {
     |              ^^^^^^^^^^^^^^^^^^^^^
...
1356 |     async fn list_accounts(&self, _limit: Option<u32>, _offset: Option<u64>) -> Result<Vec<Account>> {
     |              ^^^^^^^^^^^^^
...
1360 |     async fn cleanup_expired_tokens(&self) -> Result<u64> {
     |              ^^^^^^^^^^^^^^^^^^^^^^
...
1364 |     async fn batch_store_files(&self, _files: Vec<FileInfo>) -> Result<Vec<(u64, bool)>> {
     |              ^^^^^^^^^^^^^^^^^
...
1368 |     async fn batch_delete_files(&self, _account_hash: &str, _file_ids: Vec<u64>) -> Result<Vec<bool>> {
     |              ^^^^^^^^^^^^^^^^^^
...
1372 |     async fn store_file_data_stream(&self, _file_id: u64, _data_stream: Box<dyn futures::Stream<Item = Result<bytes::Bytes>> + Send + Unpin>) -> Result<()> {
     |              ^^^^^^^^^^^^^^^^^^^^^^
...
1376 |     async fn get_file_data_stream(&self, _file_id: u64) -> Result<Option<Box<dyn futures::Stream<Item = Result<bytes::Bytes>> + Send + Unpin>>> {
     |              ^^^^^^^^^^^^^^^^^^^^
...
1380 |     async fn update_encryption_key(&self, _account_hash: &str, _encryption_key: &str) -> Result<()> {
     |              ^^^^^^^^^^^^^^^^^^^^^
...
1384 |     async fn delete_encryption_key(&self, _account_hash: &str) -> Result<()> {
     |              ^^^^^^^^^^^^^^^^^^^^^

warning: field `oauth` is never read
  --> src/server/service.rs:71:5
   |
67 | pub struct SyncServiceImpl {
   |            --------------- field in this struct
...
71 |     oauth: Arc<OAuthService>,
   |     ^^^^^

warning: method `validate_auth` is never used
   --> src/server/service.rs:108:14
    |
84  | impl SyncServiceImpl {
    | -------------------- method in this implementation
...
108 |     async fn validate_auth(&self, auth_token: &str, account_hash: &str) -> Result<(), Status> {
    |              ^^^^^^^^^^^^^

warning: fields `app_state` and `auth_handler` are never read
   --> src/server/service.rs:917:5
    |
915 | pub struct SyncClientServiceImpl {
    |            --------------------- fields in this struct
916 |     /// Application state
917 |     app_state: Arc<AppState>,
    |     ^^^^^^^^^
918 |     /// Authentication handler
919 |     auth_handler: AuthHandler,
    |     ^^^^^^^^^^^^

warning: associated function `initialize_file_storage_with_storage` is never used
   --> src/server/app_state.rs:203:14
    |
87  | impl AppState {
    | ------------- associated function in this implementation
...
203 |     async fn initialize_file_storage_with_storage(storage: Arc<dyn Storage>) -> Result<Arc<dyn FileStorage>, AppError> {
    |              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

warning: method `update_metrics` is never used
   --> src/server/components/sync_server.rs:102:14
    |
83  | impl SyncServerComponent {
    | ------------------------ method in this implementation
...
102 |     async fn update_metrics(&mut self) {
    |              ^^^^^^^^^^^^^^

warning: field `watcher_groups` is never read
  --> src/services/watcher_service.rs:14:5
   |
12 | pub struct WatcherService {
   |            -------------- field in this struct
13 |     // Memory cache for watcher groups
14 |     watcher_groups: Arc<Mutex<HashMap<String, Vec<WatcherGroup>>>>,
   |     ^^^^^^^^^^^^^^
   |
   = note: `WatcherService` has a derived impl for the trait `Clone`, but this is intentionally ignored during dead code analysis

warning: method `handle_validate_token` is never used
   --> src/handlers/auth_handler.rs:277:14
    |
31  | impl AuthHandler {
    | ---------------- method in this implementation
...
277 |     async fn handle_validate_token(
    |              ^^^^^^^^^^^^^^^^^^^^^

warning: method `create_file_info` is never used
   --> src/handlers/file_handler.rs:189:8
    |
33  | impl FileHandler {
    | ---------------- method in this implementation
...
189 |     fn create_file_info(&self, req: &UploadFileRequest, file_id: u64, normalized_file_path: String) -> crate::models::file::FileInfo {
    |        ^^^^^^^^^^^^^^^^

warning: fields `access_token`, `token_type`, `expires_in`, and `refresh_token` are never read
  --> src/auth/oauth.rs:22:5
   |
21 | struct OAuthTokenResponse {
   |        ------------------ fields in this struct
22 |     access_token: String,
   |     ^^^^^^^^^^^^
23 |     token_type: String,
   |     ^^^^^^^^^^
24 |     expires_in: u64,
   |     ^^^^^^^^^^
25 |     #[serde(default)]
26 |     refresh_token: Option<String>,
   |     ^^^^^^^^^^^^^
   |
   = note: `OAuthTokenResponse` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis

warning: multiple fields are never read
  --> src/auth/oauth.rs:54:9
   |
44 | struct UserInfo {
   |        -------- fields in this struct
...
54 |     pub company_name: Option<String>,
   |         ^^^^^^^^^^^^
55 |     #[serde(default)]
56 |     pub newsletter: Option<bool>,
   |         ^^^^^^^^^^
57 |     #[serde(default)]
58 |     pub staff: Option<bool>,
   |         ^^^^^
59 |     #[serde(default)]
60 |     pub stripe_id: Option<String>,
   |         ^^^^^^^^^
61 |     #[serde(default)]
62 |     pub third_party_login: Option<bool>,
   |         ^^^^^^^^^^^^^^^^^
63 |     #[serde(default)]
64 |     pub two_factor_enabled: Option<bool>,
   |         ^^^^^^^^^^^^^^^^^^
65 |     #[serde(default)]
66 |     pub r#type: Option<String>,
   |         ^^^^^^
   |
   = note: `UserInfo` has a derived impl for the trait `Debug`, but this is intentionally ignored during dead code analysis

warning: fields `refresh_token` and `expires_in` are never read
   --> src/auth/oauth.rs:264:13
    |
261 |         struct TokenResponse {
    |                ------------- fields in this struct
...
264 |             refresh_token: Option<String>,
    |             ^^^^^^^^^^^^^
265 |             #[serde(default)]
266 |             expires_in: Option<u64>,
    |             ^^^^^^^^^^

warning: field `system_info` is never read
  --> src/monitoring.rs:14:5
   |
11 | pub struct PerformanceMonitor {
   |            ------------------ field in this struct
...
14 |     system_info: SystemInfo,
   |     ^^^^^^^^^^^

warning: call to `.clone()` on a reference in this situation does nothing
   --> src/storage/mysql_file.rs:644:26
    |
644 |                 file_path.clone().into(), // 전체 경로가 file_path에 저장된 경우
    |                          ^^^^^^^^ help: remove this redundant call
    |
    = note: the type `str` does not implement `Clone`, so calling `clone` on `&str` copies the reference, which does not do anything and can be removed
    = note: `#[warn(noop_method_call)]` on by default

warning: call to `.clone()` on a reference in this situation does nothing
   --> src/storage/mysql_file.rs:645:26
    |
645 |                 file_path.clone().into(), // 경로+파일명이 합쳐진 전체 경로와 비교
    |                          ^^^^^^^^ help: remove this redundant call
    |
    = note: the type `str` does not implement `Clone`, so calling `clone` on `&str` copies the reference, which does not do anything and can be removed

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:16:5
   |
16 |     async fn get_watcher(&self, watcher_id: i32) -> Result<WatcherData>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
   = note: `#[warn(async_fn_in_trait)]` on by default
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
16 -     async fn get_watcher(&self, watcher_id: i32) -> Result<WatcherData>;
16 +     fn get_watcher(&self, watcher_id: i32) -> impl std::future::Future<Output = Result<WatcherData>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:19:5
   |
19 |     async fn register_watcher_group(&self, account_hash: &str, device_hash: &str, watcher_group: &WatcherGroup) -> Result<i32>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
19 -     async fn register_watcher_group(&self, account_hash: &str, device_hash: &str, watcher_group: &WatcherGroup) -> Result<i32>;
19 +     fn register_watcher_group(&self, account_hash: &str, device_hash: &str, watcher_group: &WatcherGroup) -> impl std::future::Future<Output = Result<i32>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:22:5
   |
22 |     async fn get_watcher_groups(&self, account_hash: &str) -> Result<Vec<WatcherGroup>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
22 -     async fn get_watcher_groups(&self, account_hash: &str) -> Result<Vec<WatcherGroup>>;
22 +     fn get_watcher_groups(&self, account_hash: &str) -> impl std::future::Future<Output = Result<Vec<WatcherGroup>>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:25:5
   |
25 |     async fn get_user_watcher_group(&self, account_hash: &str, group_id: i32) -> Result<Option<WatcherGroup>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
25 -     async fn get_user_watcher_group(&self, account_hash: &str, group_id: i32) -> Result<Option<WatcherGroup>>;
25 +     fn get_user_watcher_group(&self, account_hash: &str, group_id: i32) -> impl std::future::Future<Output = Result<Option<WatcherGroup>>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:28:5
   |
28 |     async fn update_watcher_group(&self, account_hash: &str, watcher_group: &WatcherGroup) -> Result<()>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
28 -     async fn update_watcher_group(&self, account_hash: &str, watcher_group: &WatcherGroup) -> Result<()>;
28 +     fn update_watcher_group(&self, account_hash: &str, watcher_group: &WatcherGroup) -> impl std::future::Future<Output = Result<()>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:31:5
   |
31 |     async fn delete_watcher_group(&self, account_hash: &str, group_id: i32) -> Result<()>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
31 -     async fn delete_watcher_group(&self, account_hash: &str, group_id: i32) -> Result<()>;
31 +     fn delete_watcher_group(&self, account_hash: &str, group_id: i32) -> impl std::future::Future<Output = Result<()>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:34:5
   |
34 |     async fn get_watcher_group_by_account_and_id(&self, account_hash: &str, group_id: i32) -> Result<Option<WatcherGroupData>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
34 -     async fn get_watcher_group_by_account_and_id(&self, account_hash: &str, group_id: i32) -> Result<Option<WatcherGroupData>>;
34 +     fn get_watcher_group_by_account_and_id(&self, account_hash: &str, group_id: i32) -> impl std::future::Future<Output = Result<Option<WatcherGroupData>>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:37:5
   |
37 |     async fn find_watcher_by_folder(&self, account_hash: &str, group_id: i32, folder: &str) -> Result<Option<i32>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
37 -     async fn find_watcher_by_folder(&self, account_hash: &str, group_id: i32, folder: &str) -> Result<Option<i32>>;
37 +     fn find_watcher_by_folder(&self, account_hash: &str, group_id: i32, folder: &str) -> impl std::future::Future<Output = Result<Option<i32>>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:40:5
   |
40 |     async fn create_watcher(&self, account_hash: &str, group_id: i32, folder: &str, is_recursive: bool, timestamp: i64) -> Result<i32>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
40 -     async fn create_watcher(&self, account_hash: &str, group_id: i32, folder: &str, is_recursive: bool, timestamp: i64) -> Result<i32>;
40 +     fn create_watcher(&self, account_hash: &str, group_id: i32, folder: &str, is_recursive: bool, timestamp: i64) -> impl std::future::Future<Output = Result<i32>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:43:5
   |
43 |     async fn create_watcher_with_conditions(&self, account_hash: &str, group_id: i32, watcher_data: &crate::sync::WatcherData, timestamp: i64) -> Result<i32>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
43 -     async fn create_watcher_with_conditions(&self, account_hash: &str, group_id: i32, watcher_data: &crate::sync::WatcherData, timestamp: i64) -> Result<i32>;
43 +     fn create_watcher_with_conditions(&self, account_hash: &str, group_id: i32, watcher_data: &crate::sync::WatcherData, timestamp: i64) -> impl std::future::Future<Output = Result<i32>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:46:5
   |
46 |     async fn get_watcher_by_group_and_id(&self, account_hash: &str, group_id: i32, watcher_id: i32) -> Result<Option<WatcherData>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
46 -     async fn get_watcher_by_group_and_id(&self, account_hash: &str, group_id: i32, watcher_id: i32) -> Result<Option<WatcherData>>;
46 +     fn get_watcher_by_group_and_id(&self, account_hash: &str, group_id: i32, watcher_id: i32) -> impl std::future::Future<Output = Result<Option<WatcherData>>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:49:5
   |
49 |     async fn get_watcher_preset(&self, account_hash: &str) -> Result<Vec<String>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
49 -     async fn get_watcher_preset(&self, account_hash: &str) -> Result<Vec<String>>;
49 +     fn get_watcher_preset(&self, account_hash: &str) -> impl std::future::Future<Output = Result<Vec<String>>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:52:5
   |
52 |     async fn register_watcher_preset_proto(&self, account_hash: &str, device_hash: &str, presets: Vec<String>) -> Result<()>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
52 -     async fn register_watcher_preset_proto(&self, account_hash: &str, device_hash: &str, presets: Vec<String>) -> Result<()>;
52 +     fn register_watcher_preset_proto(&self, account_hash: &str, device_hash: &str, presets: Vec<String>) -> impl std::future::Future<Output = Result<()>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:55:5
   |
55 |     async fn update_watcher_preset_proto(&self, account_hash: &str, device_hash: &str, presets: Vec<String>) -> Result<()>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
55 -     async fn update_watcher_preset_proto(&self, account_hash: &str, device_hash: &str, presets: Vec<String>) -> Result<()>;
55 +     fn update_watcher_preset_proto(&self, account_hash: &str, device_hash: &str, presets: Vec<String>) -> impl std::future::Future<Output = Result<()>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:60:5
   |
60 |     async fn create_watcher_condition(&self, condition: &WatcherCondition) -> Result<i64>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
60 -     async fn create_watcher_condition(&self, condition: &WatcherCondition) -> Result<i64>;
60 +     fn create_watcher_condition(&self, condition: &WatcherCondition) -> impl std::future::Future<Output = Result<i64>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:63:5
   |
63 |     async fn get_watcher_conditions(&self, account_hash: &str, watcher_id: i32) -> Result<Vec<WatcherCondition>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
63 -     async fn get_watcher_conditions(&self, account_hash: &str, watcher_id: i32) -> Result<Vec<WatcherCondition>>;
63 +     fn get_watcher_conditions(&self, account_hash: &str, watcher_id: i32) -> impl std::future::Future<Output = Result<Vec<WatcherCondition>>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:66:5
   |
66 |     async fn update_watcher_condition(&self, condition: &WatcherCondition) -> Result<()>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
66 -     async fn update_watcher_condition(&self, condition: &WatcherCondition) -> Result<()>;
66 +     fn update_watcher_condition(&self, condition: &WatcherCondition) -> impl std::future::Future<Output = Result<()>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:69:5
   |
69 |     async fn delete_watcher_condition(&self, condition_id: i64) -> Result<()>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
69 -     async fn delete_watcher_condition(&self, condition_id: i64) -> Result<()>;
69 +     fn delete_watcher_condition(&self, condition_id: i64) -> impl std::future::Future<Output = Result<()>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:72:5
   |
72 |     async fn delete_all_watcher_conditions(&self, watcher_id: i32) -> Result<()>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
72 -     async fn delete_all_watcher_conditions(&self, watcher_id: i32) -> Result<()>;
72 +     fn delete_all_watcher_conditions(&self, watcher_id: i32) -> impl std::future::Future<Output = Result<()>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:75:5
   |
75 |     async fn save_watcher_conditions(&self, watcher_id: i32, conditions: &[WatcherCondition]) -> Result<()>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
75 -     async fn save_watcher_conditions(&self, watcher_id: i32, conditions: &[WatcherCondition]) -> Result<()>;
75 +     fn save_watcher_conditions(&self, watcher_id: i32, conditions: &[WatcherCondition]) -> impl std::future::Future<Output = Result<()>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:78:5
   |
78 |     async fn get_server_group_id(&self, account_hash: &str, client_group_id: i32) -> Result<Option<i32>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
78 -     async fn get_server_group_id(&self, account_hash: &str, client_group_id: i32) -> Result<Option<i32>>;
78 +     fn get_server_group_id(&self, account_hash: &str, client_group_id: i32) -> impl std::future::Future<Output = Result<Option<i32>>> + Send;
   |

warning: use of `async fn` in public traits is discouraged as auto trait bounds cannot be specified
  --> src/storage/mysql_watcher.rs:81:5
   |
81 |     async fn get_server_ids(&self, account_hash: &str, client_group_id: i32, client_watcher_id: i32) -> Result<Option<(i32, i32)>>;
   |     ^^^^^
   |
   = note: you can suppress this lint if you plan to use the trait only in your own code, or do not care about auto traits like `Send` on the `Future`
help: you can alternatively desugar to a normal `fn` that returns `impl Future` and add any desired bounds such as `Send`, but these cannot be relaxed without a breaking API change
   |
81 -     async fn get_server_ids(&self, account_hash: &str, client_group_id: i32, client_watcher_id: i32) -> Result<Option<(i32, i32)>>;
81 +     fn get_server_ids(&self, account_hash: &str, client_group_id: i32, client_watcher_id: i32) -> impl std::future::Future<Output = Result<Option<(i32, i32)>>> + Send;
   |

warning: unused `std::result::Result` that must be used
   --> src/handlers/auth_handler.rs:366:9
    |
366 | /         self.update_session(
367 | |             &notification.device_hash, 
368 | |             &notification.auth_token, 
369 | |             &notification.account_hash, 
370 | |             &notification.encryption_key
371 | |         );
    | |_________^
    |
    = note: this `Result` may be an `Err` variant, which should be handled
    = note: `#[warn(unused_must_use)]` on by default
help: use `let _ = ...` to ignore the resulting value
    |
366 |         let _ = self.update_session(
    |         +++++++

warning: `cosmic-sync-server` (lib) generated 264 warnings (run `cargo fix --lib -p cosmic-sync-server` to apply 112 suggestions)
warning: unused imports: `ConfigLoader`, `FeatureFlags`, `LoggingConfig`, `StorageConfig`, and `server::startup::start_server`
  --> src/main.rs:8:5
   |
8  |     server::startup::start_server,
   |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
9  |     config::{Config, Environment, ConfigLoader},
   |                                   ^^^^^^^^^^^^
10 |     config::settings::{ServerConfig, DatabaseConfig, LoggingConfig, FeatureFlags, StorageConfig},
   |                                                      ^^^^^^^^^^^^^  ^^^^^^^^^^^^  ^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` on by default

warning: comparison is useless due to type limits
   --> src/main.rs:227:30
    |
227 |     if config.port < 1024 || config.port > 65535 {
    |                              ^^^^^^^^^^^^^^^^^^^
    |
    = note: `#[warn(unused_comparisons)]` on by default

warning: `cosmic-sync-server` (bin "cosmic-sync-server") generated 2 warnings (run `cargo fix --bin "cosmic-sync-server"` to apply 1 suggestion)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.27s
     Running `target/debug/cosmic-sync-server`
[2m2025-08-06T02:33:04.198552Z[0m [32m INFO[0m ThreadId(01) [2mcosmic_sync_server[0m[2m:[0m ✅ Structured logging initialized with level: debug
[2m2025-08-06T02:33:04.198648Z[0m [32m INFO[0m ThreadId(01) [2mcosmic_sync_server[0m[2m:[0m 🔧 Starting with legacy architecture
[2m2025-08-06T02:33:04.198743Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server[0m[2m:[0m 📋 Loading server configuration...
[2m2025-08-06T02:33:04.198865Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server[0m[2m:[0m 🔧 Detected environment: Development (from ENVIRONMENT variable)
[2m2025-08-06T02:33:04.198915Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Initializing config loader for environment: Development
[2m2025-08-06T02:33:04.198935Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Development environment detected, using local environment variables
[2m2025-08-06T02:33:04.198971Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Loading configuration for environment: Development
[2m2025-08-06T02:33:04.199055Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: SERVER_HOST
[2m2025-08-06T02:33:04.199070Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for SERVER_HOST in environment variables
[2m2025-08-06T02:33:04.199077Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: GRPC_PORT
[2m2025-08-06T02:33:04.199087Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Using default value for GRPC_PORT
[2m2025-08-06T02:33:04.199100Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: STORAGE_PATH
[2m2025-08-06T02:33:04.199113Z[0m [33m WARN[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m No value found for config key: STORAGE_PATH
[2m2025-08-06T02:33:04.199121Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: WORKER_THREADS
[2m2025-08-06T02:33:04.199127Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for WORKER_THREADS in environment variables
[2m2025-08-06T02:33:04.199144Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: AUTH_TOKEN_EXPIRY_HOURS
[2m2025-08-06T02:33:04.199150Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for AUTH_TOKEN_EXPIRY_HOURS in environment variables
[2m2025-08-06T02:33:04.199173Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: MAX_FILE_SIZE
[2m2025-08-06T02:33:04.199192Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for MAX_FILE_SIZE in environment variables
[2m2025-08-06T02:33:04.199211Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: MAX_CONCURRENT_REQUESTS
[2m2025-08-06T02:33:04.199219Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for MAX_CONCURRENT_REQUESTS in environment variables
[2m2025-08-06T02:33:04.199227Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: DB_USER
[2m2025-08-06T02:33:04.199234Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for DB_USER in environment variables
[2m2025-08-06T02:33:04.199242Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: DB_PASS
[2m2025-08-06T02:33:04.199248Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for DB_PASS in environment variables
[2m2025-08-06T02:33:04.199255Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: DB_NAME
[2m2025-08-06T02:33:04.199263Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for DB_NAME in environment variables
[2m2025-08-06T02:33:04.199272Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: DB_HOST
[2m2025-08-06T02:33:04.199286Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for DB_HOST in environment variables
[2m2025-08-06T02:33:04.199294Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: DB_PORT
[2m2025-08-06T02:33:04.199300Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for DB_PORT in environment variables
[2m2025-08-06T02:33:04.199307Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: DB_POOL
[2m2025-08-06T02:33:04.199316Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for DB_POOL in environment variables
[2m2025-08-06T02:33:04.199336Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: DATABASE_CONNECTION_TIMEOUT
[2m2025-08-06T02:33:04.199344Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Using default value for DATABASE_CONNECTION_TIMEOUT
[2m2025-08-06T02:33:04.199366Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: DATABASE_LOG_QUERIES
[2m2025-08-06T02:33:04.199374Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Using default value for DATABASE_LOG_QUERIES
[2m2025-08-06T02:33:04.199389Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: STORAGE_TYPE
[2m2025-08-06T02:33:04.199398Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for STORAGE_TYPE in environment variables
[2m2025-08-06T02:33:04.199434Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: AWS_S3_REGION
[2m2025-08-06T02:33:04.199451Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Using default value for AWS_S3_REGION
[2m2025-08-06T02:33:04.199459Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: AWS_S3_BUCKET
[2m2025-08-06T02:33:04.199468Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Using default value for AWS_S3_BUCKET
[2m2025-08-06T02:33:04.199474Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: S3_KEY_PREFIX
[2m2025-08-06T02:33:04.199481Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for S3_KEY_PREFIX in environment variables
[2m2025-08-06T02:33:04.199491Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: AWS_ACCESS_KEY_ID
[2m2025-08-06T02:33:04.199497Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for AWS_ACCESS_KEY_ID in environment variables
[2m2025-08-06T02:33:04.199503Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: AWS_SECRET_ACCESS_KEY
[2m2025-08-06T02:33:04.199511Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for AWS_SECRET_ACCESS_KEY in environment variables
[2m2025-08-06T02:33:04.199519Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: AWS_SESSION_TOKEN
[2m2025-08-06T02:33:04.199525Z[0m [33m WARN[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m No value found for config key: AWS_SESSION_TOKEN
[2m2025-08-06T02:33:04.199531Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: S3_ENDPOINT_URL
[2m2025-08-06T02:33:04.199541Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for S3_ENDPOINT_URL in environment variables
[2m2025-08-06T02:33:04.199549Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: S3_FORCE_PATH_STYLE
[2m2025-08-06T02:33:04.199554Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for S3_FORCE_PATH_STYLE in environment variables
[2m2025-08-06T02:33:04.199577Z[0m [33m WARN[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Development environment should not use AWS Secrets Manager
[2m2025-08-06T02:33:04.199585Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: S3_TIMEOUT_SECONDS
[2m2025-08-06T02:33:04.199594Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for S3_TIMEOUT_SECONDS in environment variables
[2m2025-08-06T02:33:04.199603Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: S3_MAX_RETRIES
[2m2025-08-06T02:33:04.199609Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for S3_MAX_RETRIES in environment variables
[2m2025-08-06T02:33:04.199616Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: LOG_LEVEL
[2m2025-08-06T02:33:04.199626Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for LOG_LEVEL in environment variables
[2m2025-08-06T02:33:04.199633Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: LOG_TO_FILE
[2m2025-08-06T02:33:04.199641Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for LOG_TO_FILE in environment variables
[2m2025-08-06T02:33:04.199658Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: LOG_FILE
[2m2025-08-06T02:33:04.199670Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for LOG_FILE in environment variables
[2m2025-08-06T02:33:04.199679Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: LOG_MAX_FILE_SIZE
[2m2025-08-06T02:33:04.199687Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for LOG_MAX_FILE_SIZE in environment variables
[2m2025-08-06T02:33:04.199727Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: LOG_MAX_BACKUPS
[2m2025-08-06T02:33:04.199738Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for LOG_MAX_BACKUPS in environment variables
[2m2025-08-06T02:33:04.199749Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: COSMIC_SYNC_TEST_MODE
[2m2025-08-06T02:33:04.199756Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for COSMIC_SYNC_TEST_MODE in environment variables
[2m2025-08-06T02:33:04.199765Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: COSMIC_SYNC_DEBUG_MODE
[2m2025-08-06T02:33:04.199775Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Found value for COSMIC_SYNC_DEBUG_MODE in environment variables
[2m2025-08-06T02:33:04.199781Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: ENABLE_METRICS
[2m2025-08-06T02:33:04.199790Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Using default value for ENABLE_METRICS
[2m2025-08-06T02:33:04.199798Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: STORAGE_ENCRYPTION
[2m2025-08-06T02:33:04.199804Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Using default value for STORAGE_ENCRYPTION
[2m2025-08-06T02:33:04.199813Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Getting config value for key: REQUEST_VALIDATION
[2m2025-08-06T02:33:04.199819Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Using default value for REQUEST_VALIDATION
[2m2025-08-06T02:33:04.199828Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server::config::secrets[0m[2m:[0m Configuration loaded successfully
[2m2025-08-06T02:33:04.200996Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mrustls::client::hs[0m[2m:[0m No cached session for IpAddress(127.0.0.1)    
[2m2025-08-06T02:33:04.201223Z[0m [34mDEBUG[0m ThreadId(01) [1mbuild_config[0m: [2mrustls::client::hs[0m[2m:[0m Not resuming any session    
[2m2025-08-06T02:33:04.202260Z[0m [33m WARN[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server[0m[2m:[0m ⚠️ Database connection test failed: Database error: Connection failed: error communicating with database: received corrupt message of type UnknownProtocolVersion
[2m2025-08-06T02:33:04.202359Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server[0m[2m:[0m ✅ Configuration validated successfully
[2m2025-08-06T02:33:04.202381Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server[0m[2m:[0m 🌐 gRPC server will listen on 0.0.0.0:50051
[2m2025-08-06T02:33:04.202391Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server[0m[2m:[0m 🗄️ Database: root@127.0.0.1
[2m2025-08-06T02:33:04.202400Z[0m [32m INFO[0m ThreadId(01) [1mbuild_config[0m: [2mcosmic_sync_server[0m[2m:[0m 🏠 Development environment detected - using local environment variables
[2m2025-08-06T02:33:04.202490Z[0m [32m INFO[0m ThreadId(01) [1minit_storage[0m: [2mcosmic_sync_server::storage[0m[2m:[0m Initializing optimized storage layer
[2m2025-08-06T02:33:04.202515Z[0m [32m INFO[0m ThreadId(01) [1minit_storage[0m:[1mcreate_mysql_storage[0m: [2mcosmic_sync_server::storage[0m[2m:[0m Creating optimized MySQL storage
[2m2025-08-06T02:33:04.202759Z[0m [32m INFO[0m ThreadId(01) [1minit_storage[0m:[1mcreate_mysql_storage[0m: [2mcosmic_sync_server::storage[0m[2m:[0m ✅ MySQL storage created successfully
[2m2025-08-06T02:33:04.202794Z[0m [32m INFO[0m ThreadId(01) [1minit_storage[0m: [2mcosmic_sync_server::storage[0m[2m:[0m ✅ Storage layer initialized successfully
[2m2025-08-06T02:33:04.202814Z[0m [32m INFO[0m ThreadId(01) [2mcosmic_sync_server[0m[2m:[0m 🚀 Starting COSMIC Sync Server v2.0.0
[2m2025-08-06T02:33:04.202821Z[0m [32m INFO[0m ThreadId(01) [2mcosmic_sync_server[0m[2m:[0m 📊 Configuration loaded: workers=4, max_requests=100

╭─────────────────────────────────────────────────────╮
│                COSMIC Sync Server                   │
│                   v2.0.0                    │
├─────────────────────────────────────────────────────┤
│ 🌐 Address: 0.0.0.0:50051                        │
│ 🧵 Workers: 4 threads                             │
│ 🚀 Max Requests: 100                               │
│ 📁 Max File Size: 50MB                            │
│ 🔧 Features: Metrics, Compression                                   │
╰─────────────────────────────────────────────────────╯

[2m2025-08-06T02:33:04.202901Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m 🚀 Starting server with custom storage
[2m2025-08-06T02:33:04.202945Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::server::app_state[0m[2m:[0m No storage path specified, using in-memory storage
[2m2025-08-06T02:33:04.202996Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::auth::oauth[0m[2m:[0m 🔧 OAuth 서비스 초기화:
[2m2025-08-06T02:33:04.203008Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::auth::oauth[0m[2m:[0m   OAUTH_CLIENT_ID: cosmic-sync
[2m2025-08-06T02:33:04.203017Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::auth::oauth[0m[2m:[0m   OAUTH_CLIENT_SECRET: cosmicse...
[2m2025-08-06T02:33:04.203026Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::auth::oauth[0m[2m:[0m   OAUTH_REDIRECT_URI: http://10.17.89.63:8080/oauth/callback
[2m2025-08-06T02:33:04.203033Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::auth::oauth[0m[2m:[0m   OAUTH_AUTH_URL: http://10.17.89.63:4000/oauth/authorize
[2m2025-08-06T02:33:04.203042Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::auth::oauth[0m[2m:[0m   OAUTH_TOKEN_URL: http://10.17.89.63:4000/oauth/token
[2m2025-08-06T02:33:04.203049Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::auth::oauth[0m[2m:[0m   OAUTH_USER_INFO_URL: http://10.17.89.63:4000/api/settings
[2m2025-08-06T02:33:04.203055Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::auth::oauth[0m[2m:[0m   OAUTH_SCOPE: profile:read
[2m2025-08-06T02:33:04.203088Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::server::app_state[0m[2m:[0m Initializing file storage with type: S3
[2m2025-08-06T02:33:04.203110Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage[0m[2m:[0m Creating optimized file storage
[2m2025-08-06T02:33:04.203126Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage[0m[2m:[0m Using S3 file storage
[2m2025-08-06T02:33:04.203142Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage::file_storage[0m[2m:[0m Initializing S3 file storage with bucket: cosmic-sync-files
[2m2025-08-06T02:33:04.203341Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2maws_runtime::fs_util[0m[2m:[0m loaded home directory [3msrc[0m[2m=[0m"HOME"
[2m2025-08-06T02:33:04.203395Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mload_config_file[0m: [2maws_runtime::env_config::source[0m[2m:[0m performing home directory substitution [3mhome[0m[2m=[0m"/home/yongjinchong" [3mpath[0m[2m=[0m"~/.aws/config" [2m[3mfile[0m[2m=[0mDefault(Config)[0m
[2m2025-08-06T02:33:04.203426Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mload_config_file[0m: [2maws_runtime::env_config::source[0m[2m:[0m home directory expanded [3mbefore[0m[2m=[0m"~/.aws/config" [3mafter[0m[2m=[0m"/home/yongjinchong/.aws/config" [2m[3mfile[0m[2m=[0mDefault(Config)[0m
[2m2025-08-06T02:33:04.203460Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mload_config_file[0m: [2maws_runtime::env_config::source[0m[2m:[0m config file loaded [3mpath[0m[2m=[0mSome("/home/yongjinchong/.aws/config") [3msize[0m[2m=[0m1202 [2m[3mfile[0m[2m=[0mDefault(Config)[0m
[2m2025-08-06T02:33:04.203492Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mload_config_file[0m: [2maws_runtime::env_config::source[0m[2m:[0m performing home directory substitution [3mhome[0m[2m=[0m"/home/yongjinchong" [3mpath[0m[2m=[0m"~/.aws/credentials" [2m[3mfile[0m[2m=[0mDefault(Credentials)[0m
[2m2025-08-06T02:33:04.203503Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mload_config_file[0m: [2maws_runtime::env_config::source[0m[2m:[0m home directory expanded [3mbefore[0m[2m=[0m"~/.aws/credentials" [3mafter[0m[2m=[0m"/home/yongjinchong/.aws/credentials" [2m[3mfile[0m[2m=[0mDefault(Credentials)[0m
[2m2025-08-06T02:33:04.203523Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mload_config_file[0m: [2maws_runtime::env_config::source[0m[2m:[0m config file loaded [3mpath[0m[2m=[0mSome("/home/yongjinchong/.aws/credentials") [3msize[0m[2m=[0m4118 [2m[3mfile[0m[2m=[0mDefault(Credentials)[0m
[2m2025-08-06T02:33:04.204677Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2maws_sdk_s3::endpoint_lib[0m[2m:[0m loading default partitions
[2m2025-08-06T02:33:04.226037Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage::file_storage[0m[2m:[0m Checking if bucket exists: cosmic-sync-files
[2m2025-08-06T02:33:04.226607Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mapply_configuration[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m timeout settings for this operation: TimeoutConfig { connect_timeout: Set(3.1s), read_timeout: Disabled, operation_timeout: Disabled, operation_attempt_timeout: Disabled } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.226848Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'serialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.226960Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'before transmit' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.227115Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::retries::strategy::standard[0m[2m:[0m no client rate limiter configured, so no token is required for the initial request. [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.227128Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m retry strategy has OKed initial request [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.227157Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m beginning attempt #1 [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.227253Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_sdk_s3::endpoint_auth_plugin[0m[2m:[0m resolving endpoint for auth scheme selection [3mendpoint_params[0m[2m=[0mEndpointResolverParams { inner: TypeErasedBox[!Clone]:Params { bucket: Some("cosmic-sync-files"), region: Some("us-east-2"), use_fips: false, use_dual_stack: false, endpoint: Some("http://127.0.0.1:9000"), force_path_style: true, accelerate: false, use_global_endpoint: false, use_object_lambda_endpoint: None, key: None, prefix: None, copy_source: None, disable_access_points: None, disable_multi_region_access_points: false, use_arn_region: None, use_s3_express_control_endpoint: None, disable_s3_express_session_auth: None }, property: {} } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.227973Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1mlazy_load_identity[0m: [2maws_smithy_runtime::client::identity::cache::lazy[0m[2m:[0m identity cache miss occurred; added new identity (took 33.25µs) [3mnew_expiration[0m[2m=[0m2025-08-06T02:48:04.227902Z [3mvalid_for[0m[2m=[0m899.999932268s [3mpartition[0m[2m=[0mIdentityCachePartition(0) [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.228029Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime::client::identity::cache::lazy[0m[2m:[0m loaded identity [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.228054Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1morchestrate_endpoint[0m: [2maws_smithy_runtime::client::orchestrator::endpoints[0m[2m:[0m resolving endpoint [3mendpoint_params[0m[2m=[0mEndpointResolverParams { inner: TypeErasedBox[!Clone]:Params { bucket: Some("cosmic-sync-files"), region: Some("us-east-2"), use_fips: false, use_dual_stack: false, endpoint: Some("http://127.0.0.1:9000"), force_path_style: true, accelerate: false, use_global_endpoint: false, use_object_lambda_endpoint: None, key: None, prefix: None, copy_source: None, disable_access_points: None, disable_multi_region_access_points: false, use_arn_region: None, use_s3_express_control_endpoint: None, disable_s3_express_session_auth: None }, property: {TypeId(0xd76b1264bcde6abbe88d5f1165e1f081): TypeErasedBox[!Clone]:Identity { data: Credentials { provider_name: "cosmic-sync-s3", access_key_id: "minioadmin", secret_access_key: "** redacted **", expires_after: "never" }, expiration: None }} } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.228181Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1morchestrate_endpoint[0m: [2maws_smithy_runtime::client::orchestrator::endpoints[0m[2m:[0m will apply endpoint Endpoint { url: "http://127.0.0.1:9000/cosmic-sync-files", headers: {}, properties: {"authSchemes": Array([Object({"signingName": String("s3"), "disableDoubleEncoding": Bool(true), "signingRegion": String("us-east-2"), "name": String("sigv4")})])} } [3mendpoint_prefix[0m[2m=[0mNone [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.228832Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'transmit' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.229452Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_http_client::client[0m[2m:[0m new connector created in 578.639µs [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.229666Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2mhyper_util::client::legacy::connect::http[0m[2m:[0m connecting to 127.0.0.1:9000 [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.229906Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2mhyper_util::client::legacy::connect::http[0m[2m:[0m connected to 127.0.0.1:9000 [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.231688Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2mhyper_util::client::legacy::pool[0m[2m:[0m pooling idle connection for ("http", 127.0.0.1:9000) [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.231782Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'before deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.231955Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.232057Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1mdeserialization[0m:[1mdeserialize_nonstreaming[0m: [2maws_sdk_s3::operation::head_bucket[0m[2m:[0m [3mextended_request_id[0m[2m=[0mSome("dd9025bab4ad464b049177c95eb6ebf374d3b3fd1af9251148b658df7ac2e3e8") [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.232114Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1mdeserialization[0m:[1mdeserialize_nonstreaming[0m: [2maws_sdk_s3::operation::head_bucket[0m[2m:[0m [3mrequest_id[0m[2m=[0mSome("18590CC84B1CD4D3") [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.232193Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'after deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.232425Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::retries::strategy::standard[0m[2m:[0m attempt #1 classified as NoActionIndicated, not retrying [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.232448Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m a retry is either unnecessary or not possible, exiting attempt loop [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m2650768 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.232654Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage::file_storage[0m[2m:[0m Bucket exists: cosmic-sync-files
[2m2025-08-06T02:33:04.232678Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage::file_storage[0m[2m:[0m S3FileStorage initialized successfully with bucket: cosmic-sync-files
[2m2025-08-06T02:33:04.232716Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage::file_storage[0m[2m:[0m S3 file storage health check for bucket: cosmic-sync-files
[2m2025-08-06T02:33:04.232994Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mapply_configuration[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m timeout settings for this operation: TimeoutConfig { connect_timeout: Set(3.1s), read_timeout: Disabled, operation_timeout: Disabled, operation_attempt_timeout: Disabled } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.233147Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'serialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.233240Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'before transmit' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.233402Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::retries::strategy::standard[0m[2m:[0m no client rate limiter configured, so no token is required for the initial request. [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.233421Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m retry strategy has OKed initial request [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.233444Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m beginning attempt #1 [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.233521Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_sdk_s3::endpoint_auth_plugin[0m[2m:[0m resolving endpoint for auth scheme selection [3mendpoint_params[0m[2m=[0mEndpointResolverParams { inner: TypeErasedBox[!Clone]:Params { bucket: Some("cosmic-sync-files"), region: Some("us-east-2"), use_fips: false, use_dual_stack: false, endpoint: Some("http://127.0.0.1:9000"), force_path_style: true, accelerate: false, use_global_endpoint: false, use_object_lambda_endpoint: None, key: None, prefix: None, copy_source: None, disable_access_points: None, disable_multi_region_access_points: false, use_arn_region: None, use_s3_express_control_endpoint: None, disable_s3_express_session_auth: None }, property: {} } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.233976Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime::client::identity::cache::lazy[0m[2m:[0m loaded identity from cache [3mbuffer_time[0m[2m=[0m10s [3mcached_expiration[0m[2m=[0mNone [3mnow[0m[2m=[0mSystemTime { tv_sec: 1754447584, tv_nsec: 233925475 } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.234068Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1morchestrate_endpoint[0m: [2maws_smithy_runtime::client::orchestrator::endpoints[0m[2m:[0m resolving endpoint [3mendpoint_params[0m[2m=[0mEndpointResolverParams { inner: TypeErasedBox[!Clone]:Params { bucket: Some("cosmic-sync-files"), region: Some("us-east-2"), use_fips: false, use_dual_stack: false, endpoint: Some("http://127.0.0.1:9000"), force_path_style: true, accelerate: false, use_global_endpoint: false, use_object_lambda_endpoint: None, key: None, prefix: None, copy_source: None, disable_access_points: None, disable_multi_region_access_points: false, use_arn_region: None, use_s3_express_control_endpoint: None, disable_s3_express_session_auth: None }, property: {TypeId(0xd76b1264bcde6abbe88d5f1165e1f081): TypeErasedBox[!Clone]:Identity { data: Credentials { provider_name: "cosmic-sync-s3", access_key_id: "minioadmin", secret_access_key: "** redacted **", expires_after: "never" }, expiration: None }} } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.234263Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1morchestrate_endpoint[0m: [2maws_smithy_runtime::client::orchestrator::endpoints[0m[2m:[0m will apply endpoint Endpoint { url: "http://127.0.0.1:9000/cosmic-sync-files", headers: {}, properties: {"authSchemes": Array([Object({"disableDoubleEncoding": Bool(true), "signingRegion": String("us-east-2"), "name": String("sigv4"), "signingName": String("s3")})])} } [3mendpoint_prefix[0m[2m=[0mNone [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.235159Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'transmit' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.235433Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2mhyper_util::client::legacy::pool[0m[2m:[0m reuse idle connection for ("http", 127.0.0.1:9000) [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.236973Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2mhyper_util::client::legacy::pool[0m[2m:[0m pooling idle connection for ("http", 127.0.0.1:9000) [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.237063Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'before deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.237243Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.237369Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1mdeserialization[0m:[1mdeserialize_nonstreaming[0m: [2maws_sdk_s3::operation::head_bucket[0m[2m:[0m [3mextended_request_id[0m[2m=[0mSome("dd9025bab4ad464b049177c95eb6ebf374d3b3fd1af9251148b658df7ac2e3e8") [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.237412Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1mdeserialization[0m:[1mdeserialize_nonstreaming[0m: [2maws_sdk_s3::operation::head_bucket[0m[2m:[0m [3mrequest_id[0m[2m=[0mSome("18590CC84B70D390") [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.237478Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'after deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.237712Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::retries::strategy::standard[0m[2m:[0m attempt #1 classified as NoActionIndicated, not retrying [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.237741Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.HeadBucket[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m a retry is either unnecessary or not possible, exiting attempt loop [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"HeadBucket" [3msdk_invocation_id[0m[2m=[0m1474867 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.238009Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage::file_storage[0m[2m:[0m Bucket health check passed: cosmic-sync-files
[2m2025-08-06T02:33:04.238396Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mapply_configuration[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m timeout settings for this operation: TimeoutConfig { connect_timeout: Set(3.1s), read_timeout: Disabled, operation_timeout: Disabled, operation_attempt_timeout: Disabled } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.238544Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'serialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.238617Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'before transmit' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.238740Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::retries::strategy::standard[0m[2m:[0m no client rate limiter configured, so no token is required for the initial request. [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.238755Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m retry strategy has OKed initial request [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.238778Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m beginning attempt #1 [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.238844Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_sdk_s3::endpoint_auth_plugin[0m[2m:[0m resolving endpoint for auth scheme selection [3mendpoint_params[0m[2m=[0mEndpointResolverParams { inner: TypeErasedBox[!Clone]:Params { bucket: Some("cosmic-sync-files"), region: Some("us-east-2"), use_fips: false, use_dual_stack: false, endpoint: Some("http://127.0.0.1:9000"), force_path_style: true, accelerate: false, use_global_endpoint: false, use_object_lambda_endpoint: None, key: None, prefix: None, copy_source: None, disable_access_points: None, disable_multi_region_access_points: false, use_arn_region: None, use_s3_express_control_endpoint: None, disable_s3_express_session_auth: None }, property: {} } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.239195Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime::client::identity::cache::lazy[0m[2m:[0m loaded identity from cache [3mbuffer_time[0m[2m=[0m10s [3mcached_expiration[0m[2m=[0mNone [3mnow[0m[2m=[0mSystemTime { tv_sec: 1754447584, tv_nsec: 239168696 } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.239249Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1morchestrate_endpoint[0m: [2maws_smithy_runtime::client::orchestrator::endpoints[0m[2m:[0m resolving endpoint [3mendpoint_params[0m[2m=[0mEndpointResolverParams { inner: TypeErasedBox[!Clone]:Params { bucket: Some("cosmic-sync-files"), region: Some("us-east-2"), use_fips: false, use_dual_stack: false, endpoint: Some("http://127.0.0.1:9000"), force_path_style: true, accelerate: false, use_global_endpoint: false, use_object_lambda_endpoint: None, key: None, prefix: None, copy_source: None, disable_access_points: None, disable_multi_region_access_points: false, use_arn_region: None, use_s3_express_control_endpoint: None, disable_s3_express_session_auth: None }, property: {TypeId(0xd76b1264bcde6abbe88d5f1165e1f081): TypeErasedBox[!Clone]:Identity { data: Credentials { provider_name: "cosmic-sync-s3", access_key_id: "minioadmin", secret_access_key: "** redacted **", expires_after: "never" }, expiration: None }} } [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.239412Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1morchestrate_endpoint[0m: [2maws_smithy_runtime::client::orchestrator::endpoints[0m[2m:[0m will apply endpoint Endpoint { url: "http://127.0.0.1:9000/cosmic-sync-files", headers: {}, properties: {"authSchemes": Array([Object({"name": String("sigv4"), "signingRegion": String("us-east-2"), "disableDoubleEncoding": Bool(true), "signingName": String("s3")})])} } [3mendpoint_prefix[0m[2m=[0mNone [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.239985Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'transmit' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.240122Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2mhyper_util::client::legacy::pool[0m[2m:[0m reuse idle connection for ("http", 127.0.0.1:9000) [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.241394Z[0m [34mDEBUG[0m ThreadId(02) [2mhyper_util::client::legacy::pool[0m[2m:[0m pooling idle connection for ("http", 127.0.0.1:9000)
[2m2025-08-06T02:33:04.241404Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'before deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.241551Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.241681Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1mdeserialization[0m:[1mdeserialize_nonstreaming[0m: [2maws_sdk_s3::operation::list_objects_v2[0m[2m:[0m [3mextended_request_id[0m[2m=[0mSome("dd9025bab4ad464b049177c95eb6ebf374d3b3fd1af9251148b658df7ac2e3e8") [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.241753Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m:[1mdeserialization[0m:[1mdeserialize_nonstreaming[0m: [2maws_sdk_s3::operation::list_objects_v2[0m[2m:[0m [3mrequest_id[0m[2m=[0mSome("18590CC84BB2EB58") [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.241862Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m:[1mtry_attempt[0m: [2maws_smithy_runtime_api::client::interceptors::context[0m[2m:[0m entering 'after deserialization' phase [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m [2m[3mattempt[0m[2m=[0m1[0m
[2m2025-08-06T02:33:04.242019Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::retries::strategy::standard[0m[2m:[0m attempt #1 classified as NoActionIndicated, not retrying [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.242035Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m:[1mS3.ListObjectsV2[0m:[1mtry_op[0m: [2maws_smithy_runtime::client::orchestrator[0m[2m:[0m a retry is either unnecessary or not possible, exiting attempt loop [2m[3mrpc.service[0m[2m=[0m"S3" [3mrpc.method[0m[2m=[0m"ListObjectsV2" [3msdk_invocation_id[0m[2m=[0m4196329 [3mrpc.system[0m[2m=[0m"aws-api"[0m
[2m2025-08-06T02:33:04.242180Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage::file_storage[0m[2m:[0m S3 health check successful - bucket access verified
[2m2025-08-06T02:33:04.242204Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mcreate_file_storage[0m: [2mcosmic_sync_server::storage[0m[2m:[0m ✅ File storage created successfully: s3
[2m2025-08-06T02:33:04.242227Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::server::app_state[0m[2m:[0m File storage initialized successfully: s3
[2m2025-08-06T02:33:04.242430Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::server::app_state[0m[2m:[0m 🚀 Background connection monitoring tasks started

╭─────────────────────────────────────────────────────╮
│                COSMIC Sync Server                   │
│                   v2.0.0                    │
├─────────────────────────────────────────────────────┤
│ 🌐 gRPC: 0.0.0.0:50051                        │
│ 🌐 HTTP: 0.0.0.0:8080                        │
│ 🧵 Workers: 4 threads                             │
│ 🚀 Max Requests: 100                               │
│ 📁 Max File Size: 50MB                            │
│ 🔧 Features: Metrics, Compression                                   │
╰─────────────────────────────────────────────────────╯

[2m2025-08-06T02:33:04.242459Z[0m [32m INFO[0m ThreadId(02) [2mcosmic_sync_server::server::connection_cleanup[0m[2m:[0m 📊 Starting connection stats reporter (interval: 30min)
[2m2025-08-06T02:33:04.242467Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m ✅ COSMIC Sync Server startup completed
[2m2025-08-06T02:33:04.242465Z[0m [32m INFO[0m ThreadId(17) [2mcosmic_sync_server::server::connection_cleanup[0m[2m:[0m 🧹 Starting connection cleanup scheduler (interval: 6h, max_age: 24h)
[2m2025-08-06T02:33:04.242503Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_http_server[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m 🌐 Starting HTTP server on 0.0.0.0:8080
[2m2025-08-06T02:33:04.242751Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_http_server[0m: [2mactix_server::builder[0m[2m:[0m starting 4 workers
[2m2025-08-06T02:33:04.242789Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_http_server[0m: [2mactix_server::server[0m[2m:[0m Tokio runtime found; starting in existing Tokio runtime
[2m2025-08-06T02:33:04.242804Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_http_server[0m: [2mactix_server::server[0m[2m:[0m starting service: "actix-web-service-0.0.0.0:8080", workers: 4, listening on: 0.0.0.0:8080
[2m2025-08-06T02:33:04.243651Z[0m [34mDEBUG[0m ThreadId(17) [2mcosmic_sync_server::server::connection_cleanup[0m[2m:[0m 🧹 Running connection cleanup task
[2m2025-08-06T02:33:04.243656Z[0m [34mDEBUG[0m ThreadId(15) [2mcosmic_sync_server::server::connection_cleanup[0m[2m:[0m 📊 Connection stats: no connections tracked
[2m2025-08-06T02:33:04.243685Z[0m [34mDEBUG[0m ThreadId(17) [2mcosmic_sync_server::server::connection_cleanup[0m[2m:[0m 🧹 Connection cleanup completed: no changes needed
[2m2025-08-06T02:33:04.246994Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_grpc_server[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m 🌐 Starting gRPC server on 0.0.0.0:50051
[2m2025-08-06T02:33:12.451326Z[0m [34mDEBUG[0m ThreadId(17) [2mhyper::proto::h1::conn[0m[2m:[0m read eof
[2m2025-08-06T02:33:12.451416Z[0m [34mDEBUG[0m ThreadId(15) [2mhyper::proto::h1::conn[0m[2m:[0m parse error (invalid HTTP version parsed) with 64 bytes
[2m2025-08-06T02:33:12.451435Z[0m [34mDEBUG[0m ThreadId(15) [2mhyper::proto::h1::dispatch[0m[2m:[0m read_head error: invalid HTTP version parsed (found HTTP2 preface)
[2m2025-08-06T02:33:12.451489Z[0m [34mDEBUG[0m ThreadId(15) [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x0), max_concurrent_streams: 100, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16777216 }
[2m2025-08-06T02:33:12.451799Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384 } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.451915Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.451961Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 5177345 } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.452274Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.452379Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(1) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.452409Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(1), flags: (0x1: END_STREAM) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.452425Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.452438Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::proto::settings[0m[2m:[0m received settings ACK; applying Settings { flags: (0x0), max_concurrent_streams: 100, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16777216 } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.452458Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 4128769 } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.452746Z[0m [34mDEBUG[0m ThreadId(15) [2mcosmic_sync_server::server::service[0m[2m:[0m Health check request received
[2m2025-08-06T02:33:12.452767Z[0m [34mDEBUG[0m ThreadId(15) [2mcosmic_sync_server::handlers::sync_handler[0m[2m:[0m Processing health check request
[2m2025-08-06T02:33:12.452998Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.453059Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(1) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.453094Z[0m [34mDEBUG[0m ThreadId(15) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.454161Z[0m [34mDEBUG[0m ThreadId(02) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mGoAway { error_code: NO_ERROR, last_stream_id: StreamId(0) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.454211Z[0m [34mDEBUG[0m ThreadId(02) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mGoAway { error_code: NO_ERROR, last_stream_id: StreamId(1) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.454233Z[0m [34mDEBUG[0m ThreadId(02) [1mConnection[0m: [2mh2::proto::connection[0m[2m:[0m Connection::poll; connection error [3merror[0m[2m=[0mGoAway(b"", NO_ERROR, Library) [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:12.454325Z[0m [34mDEBUG[0m ThreadId(02) [2mhyper::server::server::new_svc[0m[2m:[0m connection error: connection error: not connected
[2m2025-08-06T02:33:22.456637Z[0m [34mDEBUG[0m ThreadId(02) [2mhyper::proto::h1::conn[0m[2m:[0m read eof
[2m2025-08-06T02:33:22.456831Z[0m [34mDEBUG[0m ThreadId(17) [2mhyper::proto::h1::conn[0m[2m:[0m parse error (invalid HTTP version parsed) with 24 bytes
[2m2025-08-06T02:33:22.456866Z[0m [34mDEBUG[0m ThreadId(17) [2mhyper::proto::h1::dispatch[0m[2m:[0m read_head error: invalid HTTP version parsed (found HTTP2 preface)
[2m2025-08-06T02:33:22.456921Z[0m [34mDEBUG[0m ThreadId(17) [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x0), max_concurrent_streams: 100, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16777216 }
[2m2025-08-06T02:33:22.457353Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x0), enable_push: 0, initial_window_size: 2097152, max_frame_size: 16384 } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.457435Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.457466Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 5177345 } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.457489Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mSettings { flags: (0x1: ACK) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.457500Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::proto::settings[0m[2m:[0m received settings ACK; applying Settings { flags: (0x0), max_concurrent_streams: 100, initial_window_size: 2097152, max_frame_size: 16384, max_header_list_size: 16777216 } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.457853Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.458022Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(1) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.458045Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mData { stream_id: StreamId(1), flags: (0x1: END_STREAM) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.458062Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mWindowUpdate { stream_id: StreamId(0), size_increment: 4128769 } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.458487Z[0m [34mDEBUG[0m ThreadId(17) [2mcosmic_sync_server::server::service[0m[2m:[0m Health check request received
[2m2025-08-06T02:33:22.458505Z[0m [34mDEBUG[0m ThreadId(17) [2mcosmic_sync_server::handlers::sync_handler[0m[2m:[0m Processing health check request
[2m2025-08-06T02:33:22.458856Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x4: END_HEADERS) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.458919Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mData { stream_id: StreamId(1) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.458954Z[0m [34mDEBUG[0m ThreadId(17) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mHeaders { stream_id: StreamId(1), flags: (0x5: END_HEADERS | END_STREAM) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.459687Z[0m [34mDEBUG[0m ThreadId(02) [1mConnection[0m: [2mh2::codec::framed_read[0m[2m:[0m received [3mframe[0m[2m=[0mGoAway { error_code: NO_ERROR, last_stream_id: StreamId(0) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.459734Z[0m [34mDEBUG[0m ThreadId(02) [1mConnection[0m: [2mh2::codec::framed_write[0m[2m:[0m send [3mframe[0m[2m=[0mGoAway { error_code: NO_ERROR, last_stream_id: StreamId(1) } [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.459754Z[0m [34mDEBUG[0m ThreadId(02) [1mConnection[0m: [2mh2::proto::connection[0m[2m:[0m Connection::poll; connection error [3merror[0m[2m=[0mGoAway(b"", NO_ERROR, Library) [2m[3mpeer[0m[2m=[0mServer[0m
[2m2025-08-06T02:33:22.459829Z[0m [34mDEBUG[0m ThreadId(02) [2mhyper::server::server::new_svc[0m[2m:[0m connection error: connection error: not connected
[2m2025-08-06T02:33:30.730060Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_http_server[0m: [2mactix_server::server[0m[2m:[0m SIGTERM received; starting graceful shutdown
[2m2025-08-06T02:33:30.730215Z[0m [32m INFO[0m ThreadId(19) [2mactix_server::worker[0m[2m:[0m shutting down idle worker
[2m2025-08-06T02:33:30.730229Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m 🛑 Received TERM signal, initiating graceful shutdown...
[2m2025-08-06T02:33:30.730230Z[0m [32m INFO[0m ThreadId(21) [2mactix_server::worker[0m[2m:[0m shutting down idle worker
[2m2025-08-06T02:33:30.730217Z[0m [34mDEBUG[0m ThreadId(22) [2mactix_server::accept[0m[2m:[0m paused accepting connections on 0.0.0.0:8080
[2m2025-08-06T02:33:30.730222Z[0m [32m INFO[0m ThreadId(20) [2mactix_server::worker[0m[2m:[0m shutting down idle worker
[2m2025-08-06T02:33:30.730265Z[0m [32m INFO[0m ThreadId(22) [2mactix_server::accept[0m[2m:[0m accept thread stopped
[2m2025-08-06T02:33:30.730222Z[0m [32m INFO[0m ThreadId(18) [2mactix_server::worker[0m[2m:[0m shutting down idle worker
[2m2025-08-06T02:33:30.730286Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_grpc_server[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m 🛑 Received TERM signal, initiating graceful shutdown...
[2m2025-08-06T02:33:30.831191Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_grpc_server[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m ✅ Shutdown signal processing complete
[2m2025-08-06T02:33:30.831303Z[0m [34mDEBUG[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_grpc_server[0m: [2mhyper::server::shutdown[0m[2m:[0m signal received, starting graceful shutdown
[2m2025-08-06T02:33:30.831491Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mstart_grpc_server[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m 🌐 gRPC server stopped
[2m2025-08-06T02:33:30.831757Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mgraceful_shutdown[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m 🔄 Starting graceful shutdown sequence...
[2m2025-08-06T02:33:30.831827Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m:[1mgraceful_shutdown[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m ✅ Graceful shutdown sequence completed
[2m2025-08-06T02:33:30.832263Z[0m [32m INFO[0m ThreadId(01) [1mstart_server_with_storage[0m: [2mcosmic_sync_server::server::startup[0m[2m:[0m ✅ Server with custom storage shutdown completed
[2m2025-08-06T02:33:30.832353Z[0m [32m INFO[0m ThreadId(01) [2mcosmic_sync_server[0m[2m:[0m ✅ Server shutdown completed successfully
