# COSMIC Sync Server - Sample Environment Variables

# Server configuration
SERVER_HOST=0.0.0.0
SERVER_PORT=50051
WORKER_THREADS=4

# Authentication
AUTH_TOKEN_EXPIRY_HOURS=24

# Limits
MAX_CONCURRENT_REQUESTS=100
MAX_FILE_SIZE=52428800

# Database
DB_USER=root
DB_PASS=recognizer
DB_NAME=cosmic_sync
DB_HOST=127.0.0.1
DB_PORT=3306
DB_POOL=10
DATABASE_CONNECTION_TIMEOUT=30
DATABASE_LOG_QUERIES=false

# OAuth
OAUTH_CLIENT_ID=
OAUTH_CLIENT_SECRET=
OAUTH_REDIRECT_URI=http://localhost:50051/oauth/callback
OAUTH_AUTH_URL=
OAUTH_TOKEN_URL=
OAUTH_USER_INFO_URL=

# Logging
LOG_LEVEL=info
LOG_TO_FILE=false
LOG_FILE=logs/cosmic-sync-server.log
LOG_MAX_FILE_SIZE=10485760
LOG_MAX_BACKUPS=5

# Storage (S3/MinIO)
S3_BUCKET=cosmic-sync-dev
S3_REGION=us-east-1
S3_ENDPOINT=http://127.0.0.1:9000
S3_FORCE_PATH_STYLE=true
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_KEY_PREFIX=files/
S3_TIMEOUT_SECONDS=30
S3_MAX_RETRIES=2

# Feature flags
COSMIC_SYNC_DEV_MODE=1
COSMIC_SYNC_TEST_MODE=0
METRICS_ENABLED=1
STORAGE_ENCRYPTION=1

# Message Broker (RabbitMQ)
RABBITMQ_ENABLED=false
RABBITMQ_URL=amqp://guest:guest@127.0.0.1:5672/%2f
RABBITMQ_EXCHANGE=cosmic.sync
RABBITMQ_QUEUE_PREFIX=cosmic
RABBITMQ_PREFETCH=64
RABBITMQ_DURABLE=true

# Redis (idempotency for consumer)
# Enable by building consumer with --features redis-cache
REDIS_URL=redis://127.0.0.1:6379/0
IDEMPOTENCY_TTL_SECS=3600

# Watcher folder validation controls
# Set to 1 to allow numeric-only segments without checks
WATCHER_FOLDER_ALLOW_NUMERIC=0
# Comma-separated list of allowed numeric-only segments (e.g., build numbers)
WATCHER_FOLDER_NUMERIC_SEGMENT_WHITELIST=
# Regex that allowed numeric-only segments must match (leave empty to disable)
WATCHER_FOLDER_NUMERIC_SEGMENT_REGEX=

# Retention policy
# Logical delete TTL (seconds) before physical purge
FILE_TTL_SECS=2592000
# Keep this many newest revisions per (file_path, group)
MAX_FILE_REVISIONS=10

# Environment marker (optional; used by Config::build in main)
ENVIRONMENT=development
